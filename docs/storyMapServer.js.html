<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>storyMapServer.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Utils.html">Utils</a><ul class='methods'><li data-type='method'><a href="module-Utils.html#addProtocolIfNeeded">addProtocolIfNeeded</a></li><li data-type='method'><a href="module-Utils.html#getRandomId">getRandomId</a></li><li data-type='method'><a href="module-Utils.html#getRandomLetter">getRandomLetter</a></li><li data-type='method'><a href="module-Utils.html#isNotEmpty">isNotEmpty</a></li><li data-type='method'><a href="module-Utils.html#isValidURL">isValidURL</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#Dialog">Dialog</a></li><li><a href="global.html#InfoPanel">InfoPanel</a></li><li><a href="global.html#Loader">Loader</a></li><li><a href="global.html#SettingsPanel">SettingsPanel</a></li><li><a href="global.html#SlideBar">SlideBar</a></li><li><a href="global.html#SlideIcon">SlideIcon</a></li><li><a href="global.html#SlideInfo">SlideInfo</a></li><li><a href="global.html#StoryMap">StoryMap</a></li><li><a href="global.html#StoryMapServer">StoryMapServer</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">storyMapServer.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* global $*/

/**
*	Constructs a StoryMap server
*	@param {Object} options An object containing the following properties
*	@property {string} urlStoryMap The URL where the server lives on
*/
function StoryMapServer(options) {

	const _defaultOptions = {

		urlStoryMap: "http://betaserver2.icgc.cat/storymaps/",

	};

	this.options = $.extend(true, {}, _defaultOptions, options);

}

/**
*	Gets the slides from a story map in view mode
*	@param {String} idStoryMap The story map identifier
*	@returns {Promise} A promise resolving the server call
*/
StoryMapServer.prototype.getMapSlides = function (idStoryMap) {

	// Example: http://172.70.1.32/storymaps/768ddc60-66e2-11e7-af5e-09aff007230d
	return $.ajax({

		method: "GET",
		url: this.options.urlStoryMap + idStoryMap,

	});

};

/**
*	Gets the slides from a story map in edit mode
*	@param {String} idStoryMap The story map identifier
*	@returns {Promise} A promise resolving the server call
*/
StoryMapServer.prototype.editMapSlides = function (idStoryMap) {

	// Example: http://172.70.1.32/storymaps/edit/76d21f00-48e0-4216-bb52-84a8a41cc6a2
	return $.ajax({

		method: "GET",
		url: `${this.options.urlStoryMap}edit/${idStoryMap}`,

	});

};

/**
*	Pushes slides to the server creating a new story map
*	@param {String} jsonSlides A JSON-encoded string with the story map data
*	@returns {Promise} A promise resolving the server call
*/
StoryMapServer.prototype.newMapSlides = function (jsonSlides) {

	// http://172.70.1.32/storymaps/edit/
	return $.ajax({

		method: "POST",
		url: `${this.options.urlStoryMap}edit/`,
		dataType: "json",
		data: { id: 0, id_editor: 0, slides: jsonSlides },

	});

};

/**
*	Pushes slides to the server editing a story map
*	@param {String} idEditStoryMap The edit mode story map identifier
*	@param {String} idViewStoryMap The view mode story map identifier
*	@param {String} jsonSlides A JSON-encoded string with the story map data
*	@returns {Promise} A promise resolving the server call
*/
StoryMapServer.prototype.updateMapSlides = function (idEditStoryMap, idViewStoryMap, jsonSlides) {

	return $.ajax({

		method: "PUT",
		url: `${this.options.urlStoryMap}edit/${idEditStoryMap}`,
		dataType: "json",
		data: { id: idViewStoryMap, id_editor: idEditStoryMap, slides: jsonSlides },

	});

};

/**
*	Deletes a story map
*	@param {String} idEditStoryMap The edit mode story map identifier
*	@param {String} idViewStoryMap The view mode story map identifier
*	@returns {Promise} A promise resolving the server call
*/
StoryMapServer.prototype.deleteMapSlides = function (idEditStoryMap, idViewStoryMap) {

	return $.ajax({

		method: "DELETE",
		url: `${this.options.urlStoryMap}edit/${idEditStoryMap}/${idViewStoryMap}`,
		contentType: "application/json",

	});

};
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.3</a> on Fri Nov 03 2017 17:49:40 GMT+0100 (Romance Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
