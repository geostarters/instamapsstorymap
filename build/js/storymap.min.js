function Dialog(t){const o={templateId:"#dialog_template",messageTextId:"#msg",showCancelButton:!0,cancelButtonClass:".btn-ko",confirmButtonClass:".btn-ok",closeButtonClass:".close"};this.options=$.extend(!0,{},o,t),this.setupDialog(),this.addEvents()}Dialog.prototype.setupDialog=function(){const t=Utils.getRandomId();this.id=`#${t}`,this.template=_.template($(this.options.templateId).html().trim()),$("body").append(this.template({id:t})),this.options.showCancelButton||$(`${this.id} ${this.cancelButtonClass}`).hide()},Dialog.prototype.addEvents=function(){const t=this;$(`${t.id} ${t.options.confirmButtonClass}`).on("click",()=>{t.hide(),$(t).trigger("Dialog:accept")}),$(`${t.id} ${t.options.closeButtonClass}`).on("click",()=>{t.hide(),$(t).trigger("Dialog:cancel")}),$(`${t.id} ${t.options.cancelButtonClass}`).on("click",()=>{t.hide(),$(t).trigger("Dialog:cancel")})},Dialog.prototype.setMessage=function(t){$(`${this.id} ${this.options.messageTextId}`).html(`<span>${t}</span>`)},Dialog.prototype.show=function(){$(this.id).show()},Dialog.prototype.hide=function(){$(this.id).hide()};
function SlideBar(i){const e={maxSlides:10,slideIconRegex:/^slide-icon-\w+$/,slidesContainerId:"#slidesContainer",slideListId:"#slideList",addSlideButton:"#storymap_add_slide"};this.options=$.extend(!0,{},e,i),this.addEvents()}SlideBar.prototype.addEvents=function(){const i=this;$(i.options.addSlideButton).click(()=>{$(i).trigger("SlideBar:addSlidePressed")})},SlideBar.prototype.addSlide=function(i){const e=this,t=i||void 0===i,d=new SlideIcon;d.appendTo(this.options.slideListId),$(d).on("Slide:deletePressed",(i,t)=>{$(e).trigger("SlideBar:deleteSlidePressed",[t])}),$(d).on("Slide:selected",(i,t)=>{e.slideSelectedId=t,$(e).trigger("SlideBar:slideSelected",[t])}),$(this.options.slidesContainerId).scrollTop(Math.max(0,$(this.options.slideListId).height()-$(this.options.slideListId).parent().height())),t&&d.clicked()},SlideBar.prototype.addSlides=function(i){for(let e=0,t=i.length;e<t;++e)this.addSlide(e===t-1),$(`${this.options.slideListId} li:nth-child(${e+1})>.slide-title`).html(i[e].titol)},SlideBar.prototype.removeSlide=function(i){$(`${this.options.slideListId} li:nth-child(${i+1})`).remove()},SlideBar.prototype.setSlideTitle=function(i){$(`${this.options.slideListId} li.selected>.slide-title`).html(i)},SlideBar.prototype.clear=function(){$(`${this.options.slideListId}`).html("")};
function SlideIcon(e){const t={text:"",templateId:"#storymap_slide_template",slideClass:".slide"};this.options=$.extend(!0,{},t,e),this.template=_.template($(this.options.templateId).html().trim()),this.slideDOMElem=$(this.template(this.options)),this.deleteDOMElem=$('<a class="close" href="javascript:">&nbsp;</a>'),this.addEvents()}SlideIcon.prototype.addEvents=function(){const e=this;e.slideDOMElem.click(()=>{e.clicked()}),e.deleteDOMElem.click(()=>{e.deleteButtonPressed()})},SlideIcon.prototype.clicked=function(){const e=this,t=$(e.options.slideClass).index(e.slideDOMElem);return $(":focus").blur(),$(`${this.options.slideClass}.selected`).removeClass("selected"),$(e.slideDOMElem).addClass("selected"),$(e).trigger("Slide:selected",[t]),!1},SlideIcon.prototype.deleteButtonPressed=function(){const e=this,t=$(e.options.slideClass).index(e.slideDOMElem);$(e).trigger("Slide:deletePressed",[t])},SlideIcon.prototype.appendTo=function(e){this.slideDOMElem.appendTo(e),this.deleteDOMElem.appendTo(this.slideDOMElem)};
function SlideInfo(t,o){const e={urlInputId:"#urlMap",urlLoadButtonId:"#storymap_load",urlClearButtonId:"#storymap_unload",urlFormGroup:"#urlFormGroup",urlFeedback:"#urlMapFeedback",titleInputId:"#title",titleFormGroup:"#titleFormGroup",titleFeedback:"#titleFeedback",infoButtonId:"#obrir_menu",saveSlideButtonId:"#storymap_save_slide",resetSlideButtonId:"#storymap_reset_slide",textInputId:"#summernote",iFrameId:"#instamapsMap",noURLId:"#noURLLoaded",iFrameContainerId:"#mapaFrame",dataContainerId:"#dataSection",spinnerId:"#saveSlideSpinner",defaultUrl:"https://www.instamaps.cat/geocatweb/visor.html?embed=1"};this.options=$.extend(!0,{},e,o),this.isDirty=!1,this.addEvents(),this.setupSummernote(),this.reset()}SlideInfo.prototype.addEvents=function(){const t=this;$(t.options.urlLoadButtonId).on("click",()=>{t.setURL()}),$(t.options.urlClearButtonId).on("click",()=>{$(t.options.urlInputId).val(""),$(t.options.iFrameId).hide(),$(t.options.noURLId).show(),t.disableURLButtons(!1),t.disableSlideInputs(!1)}),$(t.options.infoButtonId).on("click",()=>{$(t.options.iFrameContainerId).hasClass("expanded")?t.open():t.close()}),$(t.options.saveSlideButtonId).on("click",()=>{t.enableSaving(!1),$(t.options.spinnerId).show(),t.disableSlideInputs(),$(t).trigger("SlideInfo:saveSlidePressed")}),$(t.options.resetSlideButtonId).on("click",()=>{t.reset(!1),t.setDirty(!0)}),$(t.options.urlInputId).on("input",()=>{t.checkURL()}),$(t.options.titleInputId).on("input",()=>{t.checkTitol()}),$(t.options.textInputId).on("summernote.change",()=>{t.checkText()})},SlideInfo.prototype.setupSummernote=function(){$(this.options.textInputId).summernote({disableDragAndDrop:!0,toolbar:[["style",["color"]],["style",["style"]],["style",["bold","underline","clear"]],["style",["fontname"]],["para",["ul","ol","paragraph"]],["insert",["table"]],["insert",["link","picture","video"]],["misc",["fullscreen","codeview","help"]]]}),$(".note-group-select-from-files").hide()},SlideInfo.prototype.checkURL=function(){const t=$(this.options.urlInputId).val();Utils.isValidURL(t)?(this.enableURLButtons(),this.setDirty(!0)):(this.disableURLButtons(),this.disableSlideInputs(!1))},SlideInfo.prototype.enableURLButtons=function(){$(this.options.urlFormGroup).removeClass("has-error"),$(this.options.urlFeedback).hide(),$(this.options.urlLoadButtonId).prop("disabled",!1),$(this.options.urlClearButtonId).prop("disabled",!1)},SlideInfo.prototype.enableSlideInputs=function(){$(this.options.titleFormGroup).removeClass("has-error"),$(this.options.titleFeedback).hide(),$(this.options.textInputId).summernote("enable"),$(this.options.titleInputId).prop("disabled",!1),$(this.options.resetSlideButtonId).prop("disabled",!1),$(this.options.saveSlideButtonId).prop("disabled",!1)},SlideInfo.prototype.disableURLButtons=function(t){(t||void 0===t)&&($(this.options.urlFormGroup).addClass("has-error"),$(this.options.urlFeedback).show()),$(this.options.urlLoadButtonId).prop("disabled",!0),$(this.options.urlClearButtonId).prop("disabled",!0)},SlideInfo.prototype.disableSlideInputs=function(t){(t||void 0===t)&&($(this.options.titleFormGroup).addClass("has-error"),$(this.options.titleFeedback).show()),$(this.options.textInputId).summernote("disable"),$(this.options.resetSlideButtonId).prop("disabled",!0),$(this.options.saveSlideButtonId).prop("disabled",!0),$(this.options.titleInputId).prop("disabled",!0)},SlideInfo.prototype.checkTitol=function(){const t=$(this.options.titleInputId).val();Utils.isNotEmpty(t)&&this.setDirty(!0)},SlideInfo.prototype.checkText=function(){const t=$(this.options.textInputId).summernote("code");Utils.isNotEmpty(t)&&this.setDirty(!0)},SlideInfo.prototype.setDirty=function(t){this.isDirty=t,this.enableSaving(t)},SlideInfo.prototype.setURL=function(){const t=this,o=$(t.options.urlInputId).val();$(t.options.iFrameId).attr("src",o),$(this.options.noURLId).hide(),$(this.options.iFrameId).show(),t.enableSlideInputs()},SlideInfo.prototype.getURL=function(){return $(this.options.urlInputId).val()},SlideInfo.prototype.getTitol=function(){return $(this.options.titleInputId).val()},SlideInfo.prototype.getDescripcio=function(){return $(this.options.textInputId).summernote("code")},SlideInfo.prototype.reset=function(t){const o=t||void 0===t;$(this.options.titleInputId).val(""),$(this.options.textInputId).summernote("code",""),$(this.options.titleFormGroup).removeClass("has-error"),$(this.options.titleFeedback).hide(),o&&($(this.options.urlInputId).val(""),$(this.options.iFrameId).hide(),$(this.options.noURLId).show(),$(this.options.textInputId).summernote("disable"))},SlideInfo.prototype.setData=function(t,o,e){t&&""!==t?($(this.options.iFrameId).attr("src",t),$(this.options.noURLId).hide(),$(this.options.iFrameId).show(),this.enableSlideInputs(),this.enableURLButtons()):($(this.options.iFrameId).hide(),$(this.options.noURLId).show(),this.disableSlideInputs(),this.disableURLButtons()),$(this.options.urlInputId).val(t),$(this.options.titleInputId).val(o),$(this.options.textInputId).summernote("code",e)},SlideInfo.prototype.close=function(){$(this.options.iFrameContainerId).removeClass("collapsed"),$(this.options.iFrameContainerId).addClass("expanded"),$(this.options.dataContainerId).hide()},SlideInfo.prototype.open=function(){$(this.options.iFrameContainerId).removeClass("expanded"),$(this.options.iFrameContainerId).addClass("collapsed"),$(this.options.dataContainerId).show()},SlideInfo.prototype.enableSaving=function(t){$(this.options.saveSlideButtonId).prop("disabled",!t)},SlideInfo.prototype.saved=function(){this.enableSlideInputs(),this.setDirty(!1),$(this.options.spinnerId).hide()};
function StoryMap(e){const i={language:"en",maxSlides:10,strings:{en:{maxSlides:"Maximum number of slides reached",publish:"<b>To edit go to:</b> <a target='_blank' href='<<edit>>'><<edit>></a> <br><br><b>To view go to:</b> <a target='_blank' href='<<view>>'><<view>></a>",delete:'Delete "<<name>>" slide?'},ca:{maxSlides:"Màxim número de slides assolit",publish:"<b>Per editar vés a:</b> <a target='_blank' href='<<edit>>'><<edit>></a> <br><br><b>Per veure vés a:</b> <a target='_blank' href='<<view>>'><<view>></a>",delete:'Elimina la diapositiva "<<name>>"?'},es:{maxSlides:"Has llegado al número máximo de slides",publish:"<b>Para editar ve a:</b> <a target='_blank' href='<<edit>>'><<edit>></a> <br><br><b>Para ver ve a:</b> <a target='_blank' href='<<view>>'><<view>></a>",delete:'Elimina la diapositiva "<<name>>"?'}},editorURL:"https://www.instamaps.cat/storymap/editor.html",viewerURL:"https://www.instamaps.cat/storymap/visor.html"};this.options=$.extend(!0,{},i,e),this.isDirty=!1,this.currentDeletionIndex=-1,this.currentSelectedIndex=-1,this.slides=[],this.idEditor="",this.idStoryMap="",this.slideBar=new SlideBar,this.slideInfoPanel=new SlideInfo,this.deleteDialog=new Dialog,this.maxSlidesDialog=new Dialog({showCancelButton:!1}),this.maxSlidesDialog.setMessage(this.options.strings[this.options.language].maxSlides),this.publishDialog=new Dialog({showCancelButton:!1}),this.server=new StoryMapServer,this.addEvents(),this._addSlide()}StoryMap.prototype.addEvents=function(){const e=this;$(e.slideInfoPanel).on("SlideInfo:saveSlidePressed",()=>{e.saveSlide()}),$(e.slideBar).on("SlideBar:slideSelected",(i,t)=>{e._slideSelected(t)}),$(e.slideBar).on("SlideBar:addSlidePressed",()=>{e._addSlide()}),$(e.slideBar).on("SlideBar:deleteSlidePressed",(i,t)=>{e.currentDeletionIndex=t,e._slideDeletePressed(t)}),$(e.deleteDialog).on("Dialog:accept",()=>{e._slideDeleteConfirmed(),this.currentSelectedIndex===this.currentDeletionIndex&&this.slideInfoPanel.clear(),e.currentDeletionIndex=-1}),$(e.deleteDialog).on("Dialog:cancel",()=>{e.currentDeletionIndex=-1})},StoryMap.prototype.saveSlide=function(){const e=this.createSlideData(this.slides.length,this.slideInfoPanel.getURL(),this.slideInfoPanel.getTitol(),this.slideInfoPanel.getDescripcio());this.slideBar.setSlideTitle(e.titol),this.slides[this.currentSelectedIndex]=e,this.isDirty=!0,this.save().then(()=>{this.slideInfoPanel.saved()})},StoryMap.prototype.createSlideData=function(e,i,t,s){return{id:e||-1,url_mapa:i||"",titol:t||"",descripcio:s||""}},StoryMap.prototype._addSlide=function(){const e=this,i=e.slides.length;if(i===e.options.maxSlides)e.maxSlidesDialog.show();else{const t=e.createSlideData(i);e.slides.push(t),this.slideBar.addSlide(),$(e).trigger("StoryMap:changed")}},StoryMap.prototype._slideSelected=function(e){if(null!=this.slides){this.currentSelectedIndex=e;const i=this.slides[e];this.slideInfoPanel.setData(i.url_mapa,i.titol,i.descripcio),this.slideInfoPanel.open()}},StoryMap.prototype._slideDeletePressed=function(e){const i=this.slides[e].titol||"(untitled)";this.deleteDialog.setMessage(this.options.strings[this.options.language].delete.replace("<<name>>",i)),this.deleteDialog.show()},StoryMap.prototype.save=function(){const e=$.Deferred();return this.isDirty?""!==this.idStoryMap?""===this.idEditor?this.server.editMapSlides(this.idStoryMap).then(function(i){this.idEditor=i.id_editor,this.server.updateMapSlides(this.idEditor,this.idStoryMap,JSON.stringify(this.slides)).then(()=>{e.resolve()},()=>{e.reject()})},()=>{e.reject()}):this.server.updateMapSlides(this.idEditor,this.idStoryMap,JSON.stringify(this.slides)).then(()=>{e.resolve()},()=>{e.reject()}):this.server.newMapSlides(JSON.stringify(this.slides)).then(i=>{this.idStoryMap=i.id,this.idEditor=i.id_editor,e.resolve()},()=>{e.reject()}):e.resolve(),e.promise()},StoryMap.prototype.load=function(e){const i=this;i.idEditor=e,i.server.editMapSlides(e).then(e=>{i.isDirty=!1,i.slides=JSON.parse(e.slides),i.slideBar.clear(),i.slideBar.addSlides(i.slides)})},StoryMap.prototype._slideDeleteConfirmed=function(){const e=this;e.isDirty=!0,e.slides.splice(this.currentDeletionIndex,1),e.slideBar.removeSlide(this.currentDeletionIndex)},StoryMap.prototype.publish=function(){const e=`${this.options.editorURL}?id=${this.idEditor}`,i=`${this.options.viewerURL}?id=${this.idStoryMap}`;let t=this.options.strings[this.options.language].publish;t=(t=t.replace(/<<edit>>/g,e)).replace(/<<view>>/g,i),this.publishDialog.setMessage(t),this.publishDialog.show()};
function StoryMapServer(t){const o={urlStoryMap:"http://172.70.1.32/storymaps/"};this.options=$.extend(!0,{},o,t)}StoryMapServer.prototype.getMapSlides=function(t){return $.ajax({method:"GET",url:this.options.urlStoryMap+t})},StoryMapServer.prototype.editMapSlides=function(t){return $.ajax({method:"GET",url:`${this.options.urlStoryMap}edit/${t}`})},StoryMapServer.prototype.newMapSlides=function(t){return $.ajax({method:"POST",url:`${this.options.urlStoryMap}edit/`,dataType:"json",data:{id:0,id_editor:0,slides:t}})},StoryMapServer.prototype.updateMapSlides=function(t,o,e){return $.ajax({method:"PUT",url:`${this.options.urlStoryMap}edit/${t}`,dataType:"json",data:{id:o,id_editor:t,slides:e}})},StoryMapServer.prototype.deleteMapSlides=function(t,o){$.ajax({method:"DELETE",url:`${this.options.urlStoryMap}edit/${t}/${o}`,contentType:"application/json"}).done(()=>{})};
const Utils={isValidURL(t){const e=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/gi;return new RegExp(e).test(t)},isNotEmpty:t=>""!==t.trim(),getRandomLetter:()=>String.fromCharCode(65+Math.floor(26*Math.random())),getRandomId:()=>Utils.getRandomLetter()+Date.now()};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpYWxvZy5qcyIsInNsaWRlQmFyLmpzIiwic2xpZGVJY29uLmpzIiwic2xpZGVJbmZvLmpzIiwic3RvcnlNYXAuanMiLCJzdG9yeU1hcFNlcnZlci5qcyIsInV0aWxzLmpzIl0sIm5hbWVzIjpbIkRpYWxvZyIsIm9wdGlvbnMiLCJfZGVmYXVsdE9wdGlvbnMiLCJ0ZW1wbGF0ZUlkIiwibWVzc2FnZVRleHRJZCIsInNob3dDYW5jZWxCdXR0b24iLCJjYW5jZWxCdXR0b25DbGFzcyIsImNvbmZpcm1CdXR0b25DbGFzcyIsImNsb3NlQnV0dG9uQ2xhc3MiLCJ0aGlzIiwiJCIsImV4dGVuZCIsInNldHVwRGlhbG9nIiwiYWRkRXZlbnRzIiwicHJvdG90eXBlIiwiaWQiLCJVdGlscyIsImdldFJhbmRvbUlkIiwidGVtcGxhdGUiLCJfIiwiaHRtbCIsInRyaW0iLCJhcHBlbmQiLCJoaWRlIiwic2VsZiIsIm9uIiwidHJpZ2dlciIsInNldE1lc3NhZ2UiLCJtc2ciLCJzaG93IiwiU2xpZGVCYXIiLCJtYXhTbGlkZXMiLCJzbGlkZUljb25SZWdleCIsInNsaWRlc0NvbnRhaW5lcklkIiwic2xpZGVMaXN0SWQiLCJhZGRTbGlkZUJ1dHRvbiIsImNsaWNrIiwiYWRkU2xpZGUiLCJzaG91bGRDbGljayIsInVuZGVmaW5lZCIsInNsaWRlIiwiU2xpZGVJY29uIiwiYXBwZW5kVG8iLCJldmVudCIsInNsaWRlU2VsZWN0ZWRJZCIsInNjcm9sbFRvcCIsIk1hdGgiLCJtYXgiLCJoZWlnaHQiLCJwYXJlbnQiLCJjbGlja2VkIiwiYWRkU2xpZGVzIiwic2xpZGVzIiwiaSIsImxlbiIsImxlbmd0aCIsInRpdG9sIiwicmVtb3ZlU2xpZGUiLCJyZW1vdmUiLCJzZXRTbGlkZVRpdGxlIiwidGV4dCIsImNsZWFyIiwic2xpZGVDbGFzcyIsInNsaWRlRE9NRWxlbSIsImRlbGV0ZURPTUVsZW0iLCJkZWxldGVCdXR0b25QcmVzc2VkIiwiY3VycmVudFNsaWRlSW5kZXgiLCJpbmRleCIsImJsdXIiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiU2xpZGVJbmZvIiwidXJsSW5wdXRJZCIsInVybExvYWRCdXR0b25JZCIsInVybENsZWFyQnV0dG9uSWQiLCJ1cmxGb3JtR3JvdXAiLCJ1cmxGZWVkYmFjayIsInRpdGxlSW5wdXRJZCIsInRpdGxlRm9ybUdyb3VwIiwidGl0bGVGZWVkYmFjayIsImluZm9CdXR0b25JZCIsInNhdmVTbGlkZUJ1dHRvbklkIiwicmVzZXRTbGlkZUJ1dHRvbklkIiwidGV4dElucHV0SWQiLCJpRnJhbWVJZCIsIm5vVVJMSWQiLCJpRnJhbWVDb250YWluZXJJZCIsImRhdGFDb250YWluZXJJZCIsInNwaW5uZXJJZCIsImRlZmF1bHRVcmwiLCJpc0RpcnR5Iiwic2V0dXBTdW1tZXJub3RlIiwicmVzZXQiLCJzZXRVUkwiLCJ2YWwiLCJkaXNhYmxlVVJMQnV0dG9ucyIsImRpc2FibGVTbGlkZUlucHV0cyIsImhhc0NsYXNzIiwib3BlbiIsImNsb3NlIiwiZW5hYmxlU2F2aW5nIiwic2V0RGlydHkiLCJjaGVja1VSTCIsImNoZWNrVGl0b2wiLCJjaGVja1RleHQiLCJzdW1tZXJub3RlIiwiZGlzYWJsZURyYWdBbmREcm9wIiwidG9vbGJhciIsInVybCIsImlzVmFsaWRVUkwiLCJlbmFibGVVUkxCdXR0b25zIiwicHJvcCIsImVuYWJsZVNsaWRlSW5wdXRzIiwic2hvd0ZlZWRiYWNrIiwiaXNOb3RFbXB0eSIsImF0dHIiLCJnZXRVUkwiLCJnZXRUaXRvbCIsImdldERlc2NyaXBjaW8iLCJkZWxldGVVUkwiLCJzaG91bGREZWxldGVVUkwiLCJzZXREYXRhIiwiZGVzY3JpcGNpbyIsInNob3VsZEVuYWJsZSIsInNhdmVkIiwiU3RvcnlNYXAiLCJsYW5ndWFnZSIsInN0cmluZ3MiLCJlbiIsInB1Ymxpc2giLCJkZWxldGUiLCJjYSIsImVzIiwiZWRpdG9yVVJMIiwidmlld2VyVVJMIiwiY3VycmVudERlbGV0aW9uSW5kZXgiLCJjdXJyZW50U2VsZWN0ZWRJbmRleCIsImlkRWRpdG9yIiwiaWRTdG9yeU1hcCIsInNsaWRlQmFyIiwic2xpZGVJbmZvUGFuZWwiLCJkZWxldGVEaWFsb2ciLCJtYXhTbGlkZXNEaWFsb2ciLCJwdWJsaXNoRGlhbG9nIiwic2VydmVyIiwiU3RvcnlNYXBTZXJ2ZXIiLCJfYWRkU2xpZGUiLCJzYXZlU2xpZGUiLCJfc2xpZGVTZWxlY3RlZCIsIl9zbGlkZURlbGV0ZVByZXNzZWQiLCJfc2xpZGVEZWxldGVDb25maXJtZWQiLCJjcmVhdGVTbGlkZURhdGEiLCJzYXZlIiwidGhlbiIsInVybF9tYXBhIiwibiIsInB1c2giLCJjdXJyZW50U2xpZGUiLCJzbGlkZVRpdGxlIiwicmVwbGFjZSIsImRlZmVycmVkIiwiRGVmZXJyZWQiLCJlZGl0TWFwU2xpZGVzIiwicmVzdWx0cyIsImlkX2VkaXRvciIsInVwZGF0ZU1hcFNsaWRlcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXNvbHZlIiwicmVqZWN0IiwibmV3TWFwU2xpZGVzIiwicHJvbWlzZSIsImxvYWQiLCJwYXJzZSIsInNwbGljZSIsInVybEVkaXRvciIsInVybFZpc29yIiwibWVzc2FnZSIsInVybFN0b3J5TWFwIiwiZ2V0TWFwU2xpZGVzIiwiaWRNYXBhIiwiYWpheCIsIm1ldGhvZCIsImlkTWFwYUVkaXRpbmciLCJqc29uU2xpZGVzIiwiZGF0YVR5cGUiLCJkYXRhIiwiZGVsZXRlTWFwU2xpZGVzIiwiY29udGVudFR5cGUiLCJkb25lIiwiW29iamVjdCBPYmplY3RdIiwiZXhwcmVzc2lvbiIsIlJlZ0V4cCIsInRlc3QiLCJnZXRSYW5kb21MZXR0ZXIiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJmbG9vciIsInJhbmRvbSIsIkRhdGUiLCJub3ciXSwibWFwcGluZ3MiOiJBQUVBLFNBQVNBLE9BQU9DLEdBRWYsTUFBTUMsR0FDTEMsV0FBWSxtQkFDWkMsY0FBZSxPQUNmQyxrQkFBa0IsRUFDbEJDLGtCQUFtQixVQUNuQkMsbUJBQW9CLFVBQ3BCQyxpQkFBa0IsVUFHbkJDLEtBQUtSLFFBQVVTLEVB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QVd0RCxHQUVjLEtBQWhCQSxFQUFLdkMsT0FJZDZLLGdCQUFlLElBRVBDLE9BQU9DLGFBQWEsR0FBS3RKLEtBQUt1SixNQUFzQixHQUFoQnZKLEtBQUt3SixXQUlqRHJMLFlBQVcsSUFFSEQsTUFBTWtMLGtCQUFvQkssS0FBS0MiLCJmaWxlIjoic3RvcnltYXAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsICQsIF8sIFV0aWxzKi9cblxuZnVuY3Rpb24gRGlhbG9nKG9wdGlvbnMpIHtcblxuXHRjb25zdCBfZGVmYXVsdE9wdGlvbnMgPSB7XG5cdFx0dGVtcGxhdGVJZDogXCIjZGlhbG9nX3RlbXBsYXRlXCIsXG5cdFx0bWVzc2FnZVRleHRJZDogXCIjbXNnXCIsXG5cdFx0c2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcblx0XHRjYW5jZWxCdXR0b25DbGFzczogXCIuYnRuLWtvXCIsXG5cdFx0Y29uZmlybUJ1dHRvbkNsYXNzOiBcIi5idG4tb2tcIixcblx0XHRjbG9zZUJ1dHRvbkNsYXNzOiBcIi5jbG9zZVwiLFxuXHR9O1xuXG5cdHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBfZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuXG5cdHRoaXMuc2V0dXBEaWFsb2coKTtcblx0dGhpcy5hZGRFdmVudHMoKTtcblxufVxuXG5EaWFsb2cucHJvdG90eXBlLnNldHVwRGlhbG9nID0gZnVuY3Rpb24gKCkge1xuXG5cdGNvbnN0IGlkID0gVXRpbHMuZ2V0UmFuZG9tSWQoKTtcblx0dGhpcy5pZCA9IGAjJHtpZH1gO1xuXG5cdHRoaXMudGVtcGxhdGUgPSBfLnRlbXBsYXRlKCQodGhpcy5vcHRpb25zLnRlbXBsYXRlSWQpLmh0bWwoKS50cmltKCkpO1xuXHQkKFwiYm9keVwiKS5hcHBlbmQodGhpcy50ZW1wbGF0ZSh7IGlkIH0pKTtcblxuXHRpZiAoIXRoaXMub3B0aW9ucy5zaG93Q2FuY2VsQnV0dG9uKSB7XG5cblx0XHQkKGAke3RoaXMuaWR9ICR7dGhpcy5jYW5jZWxCdXR0b25DbGFzc31gKS5oaWRlKCk7XG5cblx0fVxuXG59O1xuXG5EaWFsb2cucHJvdG90eXBlLmFkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuXHRjb25zdCBzZWxmID0gdGhpcztcblxuXHQkKGAke3NlbGYuaWR9ICR7c2VsZi5vcHRpb25zLmNvbmZpcm1CdXR0b25DbGFzc31gKS5vbihcImNsaWNrXCIsICgpID0+IHtcblxuXHRcdHNlbGYuaGlkZSgpO1xuXHRcdCQoc2VsZikudHJpZ2dlcihcIkRpYWxvZzphY2NlcHRcIik7XG5cblx0fSk7XG5cblx0JChgJHtzZWxmLmlkfSAke3NlbGYub3B0aW9ucy5jbG9zZUJ1dHRvbkNsYXNzfWApLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuXG5cdFx0c2VsZi5oaWRlKCk7XG5cdFx0JChzZWxmKS50cmlnZ2VyKFwiRGlhbG9nOmNhbmNlbFwiKTtcblxuXHR9KTtcblxuXHQkKGAke3NlbGYuaWR9ICR7c2VsZi5vcHRpb25zLmNhbmNlbEJ1dHRvbkNsYXNzfWApLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuXG5cdFx0c2VsZi5oaWRlKCk7XG5cdFx0JChzZWxmKS50cmlnZ2VyKFwiRGlhbG9nOmNhbmNlbFwiKTtcblxuXHR9KTtcblxufTtcblxuRGlhbG9nLnByb3RvdHlwZS5zZXRNZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xuXG5cdCQoYCR7dGhpcy5pZH0gJHt0aGlzLm9wdGlvbnMubWVzc2FnZVRleHRJZH1gKS5odG1sKGA8c3Bhbj4ke21zZ308L3NwYW4+YCk7XG5cbn07XG5cbkRpYWxvZy5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcblxuXHQkKHRoaXMuaWQpLnNob3coKTtcblxufTtcblxuRGlhbG9nLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKCkge1xuXG5cdCQodGhpcy5pZCkuaGlkZSgpO1xuXG59O1xuIiwiLyogZ2xvYmFsICQsIFNsaWRlSWNvbiovXG5cbmZ1bmN0aW9uIFNsaWRlQmFyKG9wdGlvbnMpIHtcblxuXHRjb25zdCBfZGVmYXVsdE9wdGlvbnMgPSB7XG5cdFx0bWF4U2xpZGVzOiAxMCxcblx0XHRzbGlkZUljb25SZWdleDogL15zbGlkZS1pY29uLVxcdyskLyxcblx0XHRzbGlkZXNDb250YWluZXJJZDogXCIjc2xpZGVzQ29udGFpbmVyXCIsXG5cdFx0c2xpZGVMaXN0SWQ6IFwiI3NsaWRlTGlzdFwiLFxuXHRcdGFkZFNsaWRlQnV0dG9uOiBcIiNzdG9yeW1hcF9hZGRfc2xpZGVcIixcblxuXHR9O1xuXG5cdHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBfZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuXG5cdHRoaXMuYWRkRXZlbnRzKCk7XG5cbn1cblxuU2xpZGVCYXIucHJvdG90eXBlLmFkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuXHRjb25zdCBzZWxmID0gdGhpcztcblxuXHQkKHNlbGYub3B0aW9ucy5hZGRTbGlkZUJ1dHRvbikuY2xpY2soKCkgPT4ge1xuXG5cdFx0JChzZWxmKS50cmlnZ2VyKFwiU2xpZGVCYXI6YWRkU2xpZGVQcmVzc2VkXCIpO1xuXG5cdH0pO1xuXG59O1xuXG5TbGlkZUJhci5wcm90b3R5cGUuYWRkU2xpZGUgPSBmdW5jdGlvbiAoY2xpY2spIHtcblxuXHRjb25zdCBzZWxmID0gdGhpcztcblx0Y29uc3Qgc2hvdWxkQ2xpY2sgPSBjbGljayB8fCAoY2xpY2sgPT09IHVuZGVmaW5lZCk7XG5cblx0Y29uc3Qgc2xpZGUgPSBuZXcgU2xpZGVJY29uKCk7XG5cdHNsaWRlLmFwcGVuZFRvKHRoaXMub3B0aW9ucy5zbGlkZUxpc3RJZCk7XG5cblx0JChzbGlkZSkub24oXCJTbGlkZTpkZWxldGVQcmVzc2VkXCIsIChldmVudCwgaWQpID0+IHtcblxuXHRcdCQoc2VsZikudHJpZ2dlcihcIlNsaWRlQmFyOmRlbGV0ZVNsaWRlUHJlc3NlZFwiLCBbaWRdKTtcblxuXHR9KTtcblxuXHQkKHNsaWRlKS5vbihcIlNsaWRlOnNlbGVjdGVkXCIsIChldmVudCwgaWQpID0+IHtcblxuXHRcdHNlbGYuc2xpZGVTZWxlY3RlZElkID0gaWQ7XG5cdFx0JChzZWxmKS50cmlnZ2VyKFwiU2xpZGVCYXI6c2xpZGVTZWxlY3RlZFwiLCBbaWRdKTtcblxuXHR9KTtcblxuXG5cdCQodGhpcy5vcHRpb25zLnNsaWRlc0NvbnRhaW5lcklkKS5zY3JvbGxUb3AoTWF0aC5tYXgoMCwgJCh0aGlzLm9wdGlvbnMuc2xpZGVMaXN0SWQpLmhlaWdodCgpIC1cblx0XHQkKHRoaXMub3B0aW9ucy5zbGlkZUxpc3RJZCkucGFyZW50KCkuaGVpZ2h0KCkpKTtcblxuXHRpZiAoc2hvdWxkQ2xpY2spIHtcblxuXHRcdHNsaWRlLmNsaWNrZWQoKTtcblxuXHR9XG5cbn07XG5cblNsaWRlQmFyLnByb3RvdHlwZS5hZGRTbGlkZXMgPSBmdW5jdGlvbiAoc2xpZGVzKSB7XG5cblx0Zm9yIChsZXQgaSA9IDAsIGxlbiA9IHNsaWRlcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuXG5cdFx0dGhpcy5hZGRTbGlkZShpID09PSAobGVuIC0gMSkpO1xuXHRcdCQoYCR7dGhpcy5vcHRpb25zLnNsaWRlTGlzdElkfSBsaTpudGgtY2hpbGQoJHtpICsgMX0pPi5zbGlkZS10aXRsZWApLmh0bWwoc2xpZGVzW2ldLnRpdG9sKTtcblxuXHR9XG5cbn07XG5cblNsaWRlQmFyLnByb3RvdHlwZS5yZW1vdmVTbGlkZSA9IGZ1bmN0aW9uIChpZCkge1xuXG5cdCQoYCR7dGhpcy5vcHRpb25zLnNsaWRlTGlzdElkfSBsaTpudGgtY2hpbGQoJHtpZCArIDF9KWApLnJlbW92ZSgpO1xuXG59O1xuXG5TbGlkZUJhci5wcm90b3R5cGUuc2V0U2xpZGVUaXRsZSA9IGZ1bmN0aW9uICh0ZXh0KSB7XG5cblx0JChgJHt0aGlzLm9wdGlvbnMuc2xpZGVMaXN0SWR9IGxpLnNlbGVjdGVkPi5zbGlkZS10aXRsZWApLmh0bWwodGV4dCk7XG5cbn07XG5cblNsaWRlQmFyLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcblxuXHQkKGAke3RoaXMub3B0aW9ucy5zbGlkZUxpc3RJZH1gKS5odG1sKFwiXCIpO1xuXG59O1xuIiwiLyogZ2xvYmFsICQsIF8qL1xuXG5mdW5jdGlvbiBTbGlkZUljb24ob3B0aW9ucykge1xuXG5cdGNvbnN0IF9kZWZhdWx0T3B0aW9ucyA9IHtcblxuXHRcdHRleHQ6IFwiXCIsXG5cdFx0dGVtcGxhdGVJZDogXCIjc3RvcnltYXBfc2xpZGVfdGVtcGxhdGVcIixcblx0XHRzbGlkZUNsYXNzOiBcIi5zbGlkZVwiLFxuXG5cdH07XG5cblx0dGhpcy5vcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge30sIF9kZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XG5cblx0dGhpcy50ZW1wbGF0ZSA9IF8udGVtcGxhdGUoJCh0aGlzLm9wdGlvbnMudGVtcGxhdGVJZCkuaHRtbCgpLnRyaW0oKSk7XG5cdHRoaXMuc2xpZGVET01FbGVtID0gJCh0aGlzLnRlbXBsYXRlKHRoaXMub3B0aW9ucykpO1xuXHR0aGlzLmRlbGV0ZURPTUVsZW0gPSAkKFwiPGEgY2xhc3M9XFxcImNsb3NlXFxcIiBocmVmPVxcXCJqYXZhc2NyaXB0OlxcXCI+Jm5ic3A7PC9hPlwiKTtcblxuXHR0aGlzLmFkZEV2ZW50cygpO1xuXG59XG5cblNsaWRlSWNvbi5wcm90b3R5cGUuYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG5cdGNvbnN0IHNlbGYgPSB0aGlzO1xuXG5cdHNlbGYuc2xpZGVET01FbGVtLmNsaWNrKCgpID0+IHtcblxuXHRcdHNlbGYuY2xpY2tlZCgpO1xuXG5cdH0pO1xuXG5cdHNlbGYuZGVsZXRlRE9NRWxlbS5jbGljaygoKSA9PiB7XG5cblx0XHRzZWxmLmRlbGV0ZUJ1dHRvblByZXNzZWQoKTtcblxuXHR9KTtcblxufTtcblxuU2xpZGVJY29uLnByb3RvdHlwZS5jbGlja2VkID0gZnVuY3Rpb24gKCkge1xuXG5cdGNvbnN0IHNlbGYgPSB0aGlzO1xuXG5cdGNvbnN0IGN1cnJlbnRTbGlkZUluZGV4ID0gJChzZWxmLm9wdGlvbnMuc2xpZGVDbGFzcykuaW5kZXgoc2VsZi5zbGlkZURPTUVsZW0pO1xuXHQkKFwiOmZvY3VzXCIpLmJsdXIoKTsgLy8gZm9yY2UgY2hhbmdlIGV2ZW50IVxuXG5cdCQoYCR7dGhpcy5vcHRpb25zLnNsaWRlQ2xhc3N9LnNlbGVjdGVkYCkucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKTtcblx0JChzZWxmLnNsaWRlRE9NRWxlbSkuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKTtcblxuXHQkKHNlbGYpLnRyaWdnZXIoXCJTbGlkZTpzZWxlY3RlZFwiLCBbY3VycmVudFNsaWRlSW5kZXhdKTtcblxuXHRyZXR1cm4gZmFsc2U7XG5cbn07XG5cblNsaWRlSWNvbi5wcm90b3R5cGUuZGVsZXRlQnV0dG9uUHJlc3NlZCA9IGZ1bmN0aW9uICgpIHtcblxuXHRjb25zdCBzZWxmID0gdGhpcztcblxuXHRjb25zdCBjdXJyZW50U2xpZGVJbmRleCA9ICQoc2VsZi5vcHRpb25zLnNsaWRlQ2xhc3MpLmluZGV4KHNlbGYuc2xpZGVET01FbGVtKTtcblx0JChzZWxmKS50cmlnZ2VyKFwiU2xpZGU6ZGVsZXRlUHJlc3NlZFwiLCBbY3VycmVudFNsaWRlSW5kZXhdKTtcblxufTtcblxuU2xpZGVJY29uLnByb3RvdHlwZS5hcHBlbmRUbyA9IGZ1bmN0aW9uIChpZCkge1xuXG5cdHRoaXMuc2xpZGVET01FbGVtLmFwcGVuZFRvKGlkKTtcblx0dGhpcy5kZWxldGVET01FbGVtLmFwcGVuZFRvKHRoaXMuc2xpZGVET01FbGVtKTtcblxufTtcbiIsIi8qIGdsb2JhbCBVdGlscywgJCovXG5cbmZ1bmN0aW9uIFNsaWRlSW5mbyhpbmRleCwgb3B0aW9ucykge1xuXG5cdGNvbnN0IF9kZWZhdWx0T3B0aW9ucyA9IHtcblxuXHRcdHVybElucHV0SWQ6IFwiI3VybE1hcFwiLFxuXHRcdHVybExvYWRCdXR0b25JZDogXCIjc3RvcnltYXBfbG9hZFwiLFxuXHRcdHVybENsZWFyQnV0dG9uSWQ6IFwiI3N0b3J5bWFwX3VubG9hZFwiLFxuXHRcdHVybEZvcm1Hcm91cDogXCIjdXJsRm9ybUdyb3VwXCIsXG5cdFx0dXJsRmVlZGJhY2s6IFwiI3VybE1hcEZlZWRiYWNrXCIsXG5cdFx0dGl0bGVJbnB1dElkOiBcIiN0aXRsZVwiLFxuXHRcdHRpdGxlRm9ybUdyb3VwOiBcIiN0aXRsZUZvcm1Hcm91cFwiLFxuXHRcdHRpdGxlRmVlZGJhY2s6IFwiI3RpdGxlRmVlZGJhY2tcIixcblx0XHRpbmZvQnV0dG9uSWQ6IFwiI29icmlyX21lbnVcIixcblx0XHRzYXZlU2xpZGVCdXR0b25JZDogXCIjc3RvcnltYXBfc2F2ZV9zbGlkZVwiLFxuXHRcdHJlc2V0U2xpZGVCdXR0b25JZDogXCIjc3RvcnltYXBfcmVzZXRfc2xpZGVcIixcblx0XHR0ZXh0SW5wdXRJZDogXCIjc3VtbWVybm90ZVwiLFxuXHRcdGlGcmFtZUlkOiBcIiNpbnN0YW1hcHNNYXBcIixcblx0XHRub1VSTElkOiBcIiNub1VSTExvYWRlZFwiLFxuXHRcdGlGcmFtZUNvbnRhaW5lcklkOiBcIiNtYXBhRnJhbWVcIixcblx0XHRkYXRhQ29udGFpbmVySWQ6IFwiI2RhdGFTZWN0aW9uXCIsXG5cdFx0c3Bpbm5lcklkOiBcIiNzYXZlU2xpZGVTcGlubmVyXCIsXG5cdFx0ZGVmYXVsdFVybDogXCJodHRwczovL3d3dy5pbnN0YW1hcHMuY2F0L2dlb2NhdHdlYi92aXNvci5odG1sP2VtYmVkPTFcIixcblxuXHR9O1xuXG5cdHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBfZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuXHR0aGlzLmlzRGlydHkgPSBmYWxzZTtcblxuXHR0aGlzLmFkZEV2ZW50cygpO1xuXHR0aGlzLnNldHVwU3VtbWVybm90ZSgpO1xuXG5cdHRoaXMucmVzZXQoKTtcblxufVxuXG5TbGlkZUluZm8ucHJvdG90eXBlLmFkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuXHRjb25zdCBzZWxmID0gdGhpcztcblxuXHQkKHNlbGYub3B0aW9ucy51cmxMb2FkQnV0dG9uSWQpLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuXG5cdFx0c2VsZi5zZXRVUkwoKTtcblxuXHR9KTtcblxuXHQkKHNlbGYub3B0aW9ucy51cmxDbGVhckJ1dHRvbklkKS5vbihcImNsaWNrXCIsICgpID0+IHtcblxuXHRcdCQoc2VsZi5vcHRpb25zLnVybElucHV0SWQpLnZhbChcIlwiKTtcblx0XHQkKHNlbGYub3B0aW9ucy5pRnJhbWVJZCkuaGlkZSgpO1xuXHRcdCQoc2VsZi5vcHRpb25zLm5vVVJMSWQpLnNob3coKTtcblx0XHRzZWxmLmRpc2FibGVVUkxCdXR0b25zKGZhbHNlKTtcblx0XHRzZWxmLmRpc2FibGVTbGlkZUlucHV0cyhmYWxzZSk7XG5cblx0fSk7XG5cblx0JChzZWxmLm9wdGlvbnMuaW5mb0J1dHRvbklkKS5vbihcImNsaWNrXCIsICgpID0+IHtcblxuXHRcdGlmICgkKHNlbGYub3B0aW9ucy5pRnJhbWVDb250YWluZXJJZCkuaGFzQ2xhc3MoXCJleHBhbmRlZFwiKSkge1xuXG5cdFx0XHRzZWxmLm9wZW4oKTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdHNlbGYuY2xvc2UoKTtcblxuXHRcdH1cblxuXHR9KTtcblxuXHQkKHNlbGYub3B0aW9ucy5zYXZlU2xpZGVCdXR0b25JZCkub24oXCJjbGlja1wiLCAoKSA9PiB7XG5cblx0XHRzZWxmLmVuYWJsZVNhdmluZyhmYWxzZSk7XG5cdFx0JChzZWxmLm9wdGlvbnMuc3Bpbm5lcklkKS5zaG93KCk7XG5cdFx0c2VsZi5kaXNhYmxlU2xpZGVJbnB1dHMoKTtcblx0XHQkKHNlbGYpLnRyaWdnZXIoXCJTbGlkZUluZm86c2F2ZVNsaWRlUHJlc3NlZFwiKTtcblxuXHR9KTtcblxuXHQkKHNlbGYub3B0aW9ucy5yZXNldFNsaWRlQnV0dG9uSWQpLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuXG5cdFx0c2VsZi5yZXNldChmYWxzZSk7XG5cdFx0c2VsZi5zZXREaXJ0eSh0cnVlKTtcblxuXHR9KTtcblxuXHQkKHNlbGYub3B0aW9ucy51cmxJbnB1dElkKS5vbihcImlucHV0XCIsICgpID0+IHtcblxuXHRcdHNlbGYuY2hlY2tVUkwoKTtcblxuXHR9KTtcblxuXHQkKHNlbGYub3B0aW9ucy50aXRsZUlucHV0SWQpLm9uKFwiaW5wdXRcIiwgKCkgPT4ge1xuXG5cdFx0c2VsZi5jaGVja1RpdG9sKCk7XG5cblx0fSk7XG5cblx0JChzZWxmLm9wdGlvbnMudGV4dElucHV0SWQpLm9uKFwic3VtbWVybm90ZS5jaGFuZ2VcIiwgKCkgPT4ge1xuXG5cdFx0c2VsZi5jaGVja1RleHQoKTtcblxuXHR9KTtcblxufTtcblxuU2xpZGVJbmZvLnByb3RvdHlwZS5zZXR1cFN1bW1lcm5vdGUgPSBmdW5jdGlvbiAoKSB7XG5cblx0JCh0aGlzLm9wdGlvbnMudGV4dElucHV0SWQpLnN1bW1lcm5vdGUoeyBkaXNhYmxlRHJhZ0FuZERyb3A6IHRydWUsXG5cdFx0dG9vbGJhcjogW1xuXHRcdFx0W1wic3R5bGVcIiwgW1wiY29sb3JcIl1dLFxuXHRcdFx0W1wic3R5bGVcIiwgW1wic3R5bGVcIl1dLFxuXHRcdFx0W1wic3R5bGVcIiwgW1wiYm9sZFwiLCBcInVuZGVybGluZVwiLCBcImNsZWFyXCJdXSxcblx0XHRcdFtcInN0eWxlXCIsIFtcImZvbnRuYW1lXCJdXSxcblx0XHRcdFtcInBhcmFcIiwgW1widWxcIiwgXCJvbFwiLCBcInBhcmFncmFwaFwiXV0sXG5cdFx0XHRbXCJpbnNlcnRcIiwgW1widGFibGVcIl1dLFxuXHRcdFx0W1wiaW5zZXJ0XCIsIFtcImxpbmtcIiwgXCJwaWN0dXJlXCIsIFwidmlkZW9cIl1dLFxuXHRcdFx0W1wibWlzY1wiLCBbXCJmdWxsc2NyZWVuXCIsIFwiY29kZXZpZXdcIiwgXCJoZWxwXCJdXSxcblx0XHRdLFxuXHR9KTtcblxuXHQvLyBIaWRlIHRoZSBcIlVwbG9hZCBwaWN0dXJlXCIgZm9ybSBcblx0JChcIi5ub3RlLWdyb3VwLXNlbGVjdC1mcm9tLWZpbGVzXCIpLmhpZGUoKTtcblxufTtcblxuU2xpZGVJbmZvLnByb3RvdHlwZS5jaGVja1VSTCA9IGZ1bmN0aW9uICgpIHtcblxuXHRjb25zdCB1cmwgPSAkKHRoaXMub3B0aW9ucy51cmxJbnB1dElkKS52YWwoKTtcblxuXHRpZiAoVXRpbHMuaXNWYWxpZFVSTCh1cmwpKSB7XG5cblx0XHR0aGlzLmVuYWJsZVVSTEJ1dHRvbnMoKTtcblx0XHR0aGlzLnNldERpcnR5KHRydWUpO1xuXG5cdH0gZWxzZSB7XG5cblx0XHR0aGlzLmRpc2FibGVVUkxCdXR0b25zKCk7XG5cdFx0dGhpcy5kaXNhYmxlU2xpZGVJbnB1dHMoZmFsc2UpO1xuXG5cdH1cblxufTtcblxuU2xpZGVJbmZvLnByb3RvdHlwZS5lbmFibGVVUkxCdXR0b25zID0gZnVuY3Rpb24gKCkge1xuXG5cdCQodGhpcy5vcHRpb25zLnVybEZvcm1Hcm91cCkucmVtb3ZlQ2xhc3MoXCJoYXMtZXJyb3JcIik7XG5cdCQodGhpcy5vcHRpb25zLnVybEZlZWRiYWNrKS5oaWRlKCk7XG5cdCQodGhpcy5vcHRpb25zLnVybExvYWRCdXR0b25JZCkucHJvcChcImRpc2FibGVkXCIsIGZhbHNlKTtcblx0JCh0aGlzLm9wdGlvbnMudXJsQ2xlYXJCdXR0b25JZCkucHJvcChcImRpc2FibGVkXCIsIGZhbHNlKTtcblxufTtcblxuU2xpZGVJbmZvLnByb3RvdHlwZS5lbmFibGVTbGlkZUlucHV0cyA9IGZ1bmN0aW9uICgpIHtcblxuXHQkKHRoaXMub3B0aW9ucy50aXRsZUZvcm1Hcm91cCkucmVtb3ZlQ2xhc3MoXCJoYXMtZXJyb3JcIik7XG5cdCQodGhpcy5vcHRpb25zLnRpdGxlRmVlZGJhY2spLmhpZGUoKTtcblx0JCh0aGlzLm9wdGlvbnMudGV4dElucHV0SWQpLnN1bW1lcm5vdGUoXCJlbmFibGVcIik7XG5cdCQodGhpcy5vcHRpb25zLnRpdGxlSW5wdXRJZCkucHJvcChcImRpc2FibGVkXCIsIGZhbHNlKTtcblx0JCh0aGlzLm9wdGlvbnMucmVzZXRTbGlkZUJ1dHRvbklkKS5wcm9wKFwiZGlzYWJsZWRcIiwgZmFsc2UpO1xuXHQkKHRoaXMub3B0aW9ucy5zYXZlU2xpZGVCdXR0b25JZCkucHJvcChcImRpc2FibGVkXCIsIGZhbHNlKTtcblxufTtcblxuU2xpZGVJbmZvLnByb3RvdHlwZS5kaXNhYmxlVVJMQnV0dG9ucyA9IGZ1bmN0aW9uIChzaG93RmVlZGJhY2spIHtcblxuXHRjb25zdCBzaG91bGRTaG93RmVlZGJhY2sgPSBzaG93RmVlZGJhY2sgfHwgKHNob3dGZWVkYmFjayA9PT0gdW5kZWZpbmVkKTtcblxuXHRpZiAoc2hvdWxkU2hvd0ZlZWRiYWNrKSB7XG5cblx0XHQkKHRoaXMub3B0aW9ucy51cmxGb3JtR3JvdXApLmFkZENsYXNzKFwiaGFzLWVycm9yXCIpO1xuXHRcdCQodGhpcy5vcHRpb25zLnVybEZlZWRiYWNrKS5zaG93KCk7XG5cblx0fVxuXG5cdCQodGhpcy5vcHRpb25zLnVybExvYWRCdXR0b25JZCkucHJvcChcImRpc2FibGVkXCIsIHRydWUpO1xuXHQkKHRoaXMub3B0aW9ucy51cmxDbGVhckJ1dHRvbklkKS5wcm9wKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG5cbn07XG5cblNsaWRlSW5mby5wcm90b3R5cGUuZGlzYWJsZVNsaWRlSW5wdXRzID0gZnVuY3Rpb24gKHNob3dGZWVkYmFjaykge1xuXG5cdGNvbnN0IHNob3VsZFNob3dGZWVkYmFjayA9IHNob3dGZWVkYmFjayB8fCAoc2hvd0ZlZWRiYWNrID09PSB1bmRlZmluZWQpO1xuXG5cdGlmIChzaG91bGRTaG93RmVlZGJhY2spIHtcblxuXHRcdCQodGhpcy5vcHRpb25zLnRpdGxlRm9ybUdyb3VwKS5hZGRDbGFzcyhcImhhcy1lcnJvclwiKTtcblx0XHQkKHRoaXMub3B0aW9ucy50aXRsZUZlZWRiYWNrKS5zaG93KCk7XG5cblx0fVxuXG5cdCQodGhpcy5vcHRpb25zLnRleHRJbnB1dElkKS5zdW1tZXJub3RlKFwiZGlzYWJsZVwiKTtcblx0JCh0aGlzLm9wdGlvbnMucmVzZXRTbGlkZUJ1dHRvbklkKS5wcm9wKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG5cdCQodGhpcy5vcHRpb25zLnNhdmVTbGlkZUJ1dHRvbklkKS5wcm9wKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG5cdCQodGhpcy5vcHRpb25zLnRpdGxlSW5wdXRJZCkucHJvcChcImRpc2FibGVkXCIsIHRydWUpO1xuXG59O1xuXG5TbGlkZUluZm8ucHJvdG90eXBlLmNoZWNrVGl0b2wgPSBmdW5jdGlvbiAoKSB7XG5cblx0Y29uc3QgdGV4dCA9ICQodGhpcy5vcHRpb25zLnRpdGxlSW5wdXRJZCkudmFsKCk7XG5cblx0aWYgKFV0aWxzLmlzTm90RW1wdHkodGV4dCkpIHtcblxuXHRcdHRoaXMuc2V0RGlydHkodHJ1ZSk7XG5cblx0fVxuXG59O1xuXG5TbGlkZUluZm8ucHJvdG90eXBlLmNoZWNrVGV4dCA9IGZ1bmN0aW9uICgpIHtcblxuXHRjb25zdCB0ZXh0ID0gJCh0aGlzLm9wdGlvbnMudGV4dElucHV0SWQpLnN1bW1lcm5vdGUoXCJjb2RlXCIpO1xuXG5cdGlmIChVdGlscy5pc05vdEVtcHR5KHRleHQpKSB7XG5cblx0XHR0aGlzLnNldERpcnR5KHRydWUpO1xuXG5cdH1cblxufTtcblxuU2xpZGVJbmZvLnByb3RvdHlwZS5zZXREaXJ0eSA9IGZ1bmN0aW9uIChpc0RpcnR5KSB7XG5cblx0dGhpcy5pc0RpcnR5ID0gaXNEaXJ0eTtcblx0dGhpcy5lbmFibGVTYXZpbmcoaXNEaXJ0eSk7XG5cbn07XG5cblNsaWRlSW5mby5wcm90b3R5cGUuc2V0VVJMID0gZnVuY3Rpb24gKCkge1xuXG5cdGNvbnN0IHNlbGYgPSB0aGlzO1xuXG5cdGNvbnN0IHVybCA9ICQoc2VsZi5vcHRpb25zLnVybElucHV0SWQpLnZhbCgpO1xuXHQkKHNlbGYub3B0aW9ucy5pRnJhbWVJZCkuYXR0cihcInNyY1wiLCB1cmwpO1xuXHQkKHRoaXMub3B0aW9ucy5ub1VSTElkKS5oaWRlKCk7XG5cdCQodGhpcy5vcHRpb25zLmlGcmFtZUlkKS5zaG93KCk7XG5cdHNlbGYuZW5hYmxlU2xpZGVJbnB1dHMoKTtcblxufTtcblxuU2xpZGVJbmZvLnByb3RvdHlwZS5nZXRVUkwgPSBmdW5jdGlvbiAoKSB7XG5cblx0cmV0dXJuICQodGhpcy5vcHRpb25zLnVybElucHV0SWQpLnZhbCgpO1xuXG59O1xuXG5TbGlkZUluZm8ucHJvdG90eXBlLmdldFRpdG9sID0gZnVuY3Rpb24gKCkge1xuXG5cdHJldHVybiAkKHRoaXMub3B0aW9ucy50aXRsZUlucHV0SWQpLnZhbCgpO1xuXG59O1xuXG5TbGlkZUluZm8ucHJvdG90eXBlLmdldERlc2NyaXBjaW8gPSBmdW5jdGlvbiAoKSB7XG5cblx0cmV0dXJuICQodGhpcy5vcHRpb25zLnRleHRJbnB1dElkKS5zdW1tZXJub3RlKFwiY29kZVwiKTtcblxufTtcblxuU2xpZGVJbmZvLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIChkZWxldGVVUkwpIHtcblxuXHRjb25zdCBzaG91bGREZWxldGVVUkwgPSBkZWxldGVVUkwgfHwgKGRlbGV0ZVVSTCA9PT0gdW5kZWZpbmVkKTtcblxuXHQkKHRoaXMub3B0aW9ucy50aXRsZUlucHV0SWQpLnZhbChcIlwiKTtcblx0JCh0aGlzLm9wdGlvbnMudGV4dElucHV0SWQpLnN1bW1lcm5vdGUoXCJjb2RlXCIsIFwiXCIpO1xuXHQkKHRoaXMub3B0aW9ucy50aXRsZUZvcm1Hcm91cCkucmVtb3ZlQ2xhc3MoXCJoYXMtZXJyb3JcIik7XG5cdCQodGhpcy5vcHRpb25zLnRpdGxlRmVlZGJhY2spLmhpZGUoKTtcblxuXHRpZiAoc2hvdWxkRGVsZXRlVVJMKSB7XG5cblx0XHQkKHRoaXMub3B0aW9ucy51cmxJbnB1dElkKS52YWwoXCJcIik7XG5cdFx0JCh0aGlzLm9wdGlvbnMuaUZyYW1lSWQpLmhpZGUoKTtcblx0XHQkKHRoaXMub3B0aW9ucy5ub1VSTElkKS5zaG93KCk7XG5cdFx0JCh0aGlzLm9wdGlvbnMudGV4dElucHV0SWQpLnN1bW1lcm5vdGUoXCJkaXNhYmxlXCIpO1xuXG5cdH1cblxufTtcblxuU2xpZGVJbmZvLnByb3RvdHlwZS5zZXREYXRhID0gZnVuY3Rpb24gKHVybCwgdGl0b2wsIGRlc2NyaXBjaW8pIHtcblxuXHRpZiAodXJsICYmIHVybCAhPT0gXCJcIikge1xuXG5cdFx0JCh0aGlzLm9wdGlvbnMuaUZyYW1lSWQpLmF0dHIoXCJzcmNcIiwgdXJsKTtcblx0XHQkKHRoaXMub3B0aW9ucy5ub1VSTElkKS5oaWRlKCk7XG5cdFx0JCh0aGlzLm9wdGlvbnMuaUZyYW1lSWQpLnNob3coKTtcblx0XHR0aGlzLmVuYWJsZVNsaWRlSW5wdXRzKCk7XG5cdFx0dGhpcy5lbmFibGVVUkxCdXR0b25zKCk7XG5cblx0fSBlbHNlIHtcblxuXHRcdCQodGhpcy5vcHRpb25zLmlGcmFtZUlkKS5oaWRlKCk7XG5cdFx0JCh0aGlzLm9wdGlvbnMubm9VUkxJZCkuc2hvdygpO1xuXHRcdHRoaXMuZGlzYWJsZVNsaWRlSW5wdXRzKCk7XG5cdFx0dGhpcy5kaXNhYmxlVVJMQnV0dG9ucygpO1xuXG5cdH1cblxuXHQkKHRoaXMub3B0aW9ucy51cmxJbnB1dElkKS52YWwodXJsKTtcblx0JCh0aGlzLm9wdGlvbnMudGl0bGVJbnB1dElkKS52YWwodGl0b2wpO1xuXHQkKHRoaXMub3B0aW9ucy50ZXh0SW5wdXRJZCkuc3VtbWVybm90ZShcImNvZGVcIiwgZGVzY3JpcGNpbyk7XG5cbn07XG5cblNsaWRlSW5mby5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG5cblx0JCh0aGlzLm9wdGlvbnMuaUZyYW1lQ29udGFpbmVySWQpLnJlbW92ZUNsYXNzKFwiY29sbGFwc2VkXCIpO1xuXHQkKHRoaXMub3B0aW9ucy5pRnJhbWVDb250YWluZXJJZCkuYWRkQ2xhc3MoXCJleHBhbmRlZFwiKTtcblx0JCh0aGlzLm9wdGlvbnMuZGF0YUNvbnRhaW5lcklkKS5oaWRlKCk7XG5cbn07XG5cblNsaWRlSW5mby5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uICgpIHtcblxuXHQkKHRoaXMub3B0aW9ucy5pRnJhbWVDb250YWluZXJJZCkucmVtb3ZlQ2xhc3MoXCJleHBhbmRlZFwiKTtcblx0JCh0aGlzLm9wdGlvbnMuaUZyYW1lQ29udGFpbmVySWQpLmFkZENsYXNzKFwiY29sbGFwc2VkXCIpO1xuXHQkKHRoaXMub3B0aW9ucy5kYXRhQ29udGFpbmVySWQpLnNob3coKTtcblxufTtcblxuU2xpZGVJbmZvLnByb3RvdHlwZS5lbmFibGVTYXZpbmcgPSBmdW5jdGlvbiAoc2hvdWxkRW5hYmxlKSB7XG5cblx0JCh0aGlzLm9wdGlvbnMuc2F2ZVNsaWRlQnV0dG9uSWQpLnByb3AoXCJkaXNhYmxlZFwiLCAhc2hvdWxkRW5hYmxlKTtcblxufTtcblxuU2xpZGVJbmZvLnByb3RvdHlwZS5zYXZlZCA9IGZ1bmN0aW9uICgpIHtcblxuXHR0aGlzLmVuYWJsZVNsaWRlSW5wdXRzKCk7XG5cdHRoaXMuc2V0RGlydHkoZmFsc2UpO1xuXHQkKHRoaXMub3B0aW9ucy5zcGlubmVySWQpLmhpZGUoKTtcblxufTtcbiIsIi8qIGdsb2JhbCAkLCBTbGlkZUJhciwgU2xpZGVJbmZvLCBTdG9yeU1hcFNlcnZlciwgRGlhbG9nKi9cblxuZnVuY3Rpb24gU3RvcnlNYXAob3B0aW9ucykge1xuXG5cdGNvbnN0IF9kZWZhdWx0T3B0aW9ucyA9IHtcblxuXHRcdGxhbmd1YWdlOiBcImVuXCIsXG5cdFx0bWF4U2xpZGVzOiAxMCxcblx0XHRzdHJpbmdzOiB7XG5cdFx0XHRlbjoge1xuXHRcdFx0XHRtYXhTbGlkZXM6IFwiTWF4aW11bSBudW1iZXIgb2Ygc2xpZGVzIHJlYWNoZWRcIixcblx0XHRcdFx0cHVibGlzaDogXCI8Yj5UbyBlZGl0IGdvIHRvOjwvYj4gPGEgdGFyZ2V0PSdfYmxhbmsnIGhyZWY9Jzw8ZWRpdD4+Jz48PGVkaXQ+PjwvYT4gPGJyPjxicj48Yj5UbyB2aWV3IGdvIHRvOjwvYj4gPGEgdGFyZ2V0PSdfYmxhbmsnIGhyZWY9Jzw8dmlldz4+Jz48PHZpZXc+PjwvYT5cIixcblx0XHRcdFx0ZGVsZXRlOiBcIkRlbGV0ZSBcXFwiPDxuYW1lPj5cXFwiIHNsaWRlP1wiLFxuXHRcdFx0fSxcblx0XHRcdGNhOiB7XG5cdFx0XHRcdG1heFNsaWRlczogXCJNw6B4aW0gbsO6bWVybyBkZSBzbGlkZXMgYXNzb2xpdFwiLFxuXHRcdFx0XHRwdWJsaXNoOiBcIjxiPlBlciBlZGl0YXIgdsOpcyBhOjwvYj4gPGEgdGFyZ2V0PSdfYmxhbmsnIGhyZWY9Jzw8ZWRpdD4+Jz48PGVkaXQ+PjwvYT4gPGJyPjxicj48Yj5QZXIgdmV1cmUgdsOpcyBhOjwvYj4gPGEgdGFyZ2V0PSdfYmxhbmsnIGhyZWY9Jzw8dmlldz4+Jz48PHZpZXc+PjwvYT5cIixcblx0XHRcdFx0ZGVsZXRlOiBcIkVsaW1pbmEgbGEgZGlhcG9zaXRpdmEgXFxcIjw8bmFtZT4+XFxcIj9cIixcblx0XHRcdH0sXG5cdFx0XHRlczoge1xuXHRcdFx0XHRtYXhTbGlkZXM6IFwiSGFzIGxsZWdhZG8gYWwgbsO6bWVybyBtw6F4aW1vIGRlIHNsaWRlc1wiLFxuXHRcdFx0XHRwdWJsaXNoOiBcIjxiPlBhcmEgZWRpdGFyIHZlIGE6PC9iPiA8YSB0YXJnZXQ9J19ibGFuaycgaHJlZj0nPDxlZGl0Pj4nPjw8ZWRpdD4+PC9hPiA8YnI+PGJyPjxiPlBhcmEgdmVyIHZlIGE6PC9iPiA8YSB0YXJnZXQ9J19ibGFuaycgaHJlZj0nPDx2aWV3Pj4nPjw8dmlldz4+PC9hPlwiLFxuXHRcdFx0XHRkZWxldGU6IFwiRWxpbWluYSBsYSBkaWFwb3NpdGl2YSBcXFwiPDxuYW1lPj5cXFwiP1wiLFxuXHRcdFx0fSxcblx0XHR9LFxuXHRcdGVkaXRvclVSTDogXCJodHRwczovL3d3dy5pbnN0YW1hcHMuY2F0L3N0b3J5bWFwL2VkaXRvci5odG1sXCIsXG5cdFx0dmlld2VyVVJMOiBcImh0dHBzOi8vd3d3Lmluc3RhbWFwcy5jYXQvc3RvcnltYXAvdmlzb3IuaHRtbFwiLFxuXG5cdH07XG5cblx0dGhpcy5vcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge30sIF9kZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XG5cblx0dGhpcy5pc0RpcnR5ID0gZmFsc2U7XG5cdHRoaXMuY3VycmVudERlbGV0aW9uSW5kZXggPSAtMTtcblx0dGhpcy5jdXJyZW50U2VsZWN0ZWRJbmRleCA9IC0xO1xuXHR0aGlzLnNsaWRlcyA9IFtdO1xuXHR0aGlzLmlkRWRpdG9yID0gXCJcIjtcblx0dGhpcy5pZFN0b3J5TWFwID0gXCJcIjtcblx0dGhpcy5zbGlkZUJhciA9IG5ldyBTbGlkZUJhcigpO1xuXHR0aGlzLnNsaWRlSW5mb1BhbmVsID0gbmV3IFNsaWRlSW5mbygpO1xuXHR0aGlzLmRlbGV0ZURpYWxvZyA9IG5ldyBEaWFsb2coKTtcblx0dGhpcy5tYXhTbGlkZXNEaWFsb2cgPSBuZXcgRGlhbG9nKHsgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UgfSk7XG5cdHRoaXMubWF4U2xpZGVzRGlhbG9nLnNldE1lc3NhZ2UodGhpcy5vcHRpb25zLnN0cmluZ3NbdGhpcy5vcHRpb25zLmxhbmd1YWdlXS5tYXhTbGlkZXMpO1xuXHR0aGlzLnB1Ymxpc2hEaWFsb2cgPSBuZXcgRGlhbG9nKHsgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UgfSk7XG5cdHRoaXMuc2VydmVyID0gbmV3IFN0b3J5TWFwU2VydmVyKCk7XG5cblx0dGhpcy5hZGRFdmVudHMoKTtcblx0dGhpcy5fYWRkU2xpZGUoKTtcblxufVxuXG5TdG9yeU1hcC5wcm90b3R5cGUuYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG5cdGNvbnN0IHNlbGYgPSB0aGlzO1xuXG5cdCQoc2VsZi5zbGlkZUluZm9QYW5lbCkub24oXCJTbGlkZUluZm86c2F2ZVNsaWRlUHJlc3NlZFwiLCAoKSA9PiB7XG5cblx0XHRzZWxmLnNhdmVTbGlkZSgpO1xuXG5cdH0pO1xuXG5cdCQoc2VsZi5zbGlkZUJhcikub24oXCJTbGlkZUJhcjpzbGlkZVNlbGVjdGVkXCIsIChldmVudCwgaWQpID0+IHtcblxuXHRcdHNlbGYuX3NsaWRlU2VsZWN0ZWQoaWQpO1xuXG5cdH0pO1xuXG5cdCQoc2VsZi5zbGlkZUJhcikub24oXCJTbGlkZUJhcjphZGRTbGlkZVByZXNzZWRcIiwgKCkgPT4ge1xuXG5cdFx0c2VsZi5fYWRkU2xpZGUoKTtcblxuXHR9KTtcblxuXHQkKHNlbGYuc2xpZGVCYXIpLm9uKFwiU2xpZGVCYXI6ZGVsZXRlU2xpZGVQcmVzc2VkXCIsIChldmVudCwgaWQpID0+IHtcblxuXHRcdHNlbGYuY3VycmVudERlbGV0aW9uSW5kZXggPSBpZDtcblx0XHRzZWxmLl9zbGlkZURlbGV0ZVByZXNzZWQoaWQpO1xuXG5cdH0pO1xuXG5cdCQoc2VsZi5kZWxldGVEaWFsb2cpLm9uKFwiRGlhbG9nOmFjY2VwdFwiLCAoKSA9PiB7XG5cblx0XHRzZWxmLl9zbGlkZURlbGV0ZUNvbmZpcm1lZCgpO1xuXG5cdFx0aWYgKHRoaXMuY3VycmVudFNlbGVjdGVkSW5kZXggPT09IHRoaXMuY3VycmVudERlbGV0aW9uSW5kZXgpIHtcblxuXHRcdFx0dGhpcy5zbGlkZUluZm9QYW5lbC5jbGVhcigpO1xuXG5cdFx0fVxuXG5cdFx0c2VsZi5jdXJyZW50RGVsZXRpb25JbmRleCA9IC0xO1xuXG5cdH0pO1xuXG5cdCQoc2VsZi5kZWxldGVEaWFsb2cpLm9uKFwiRGlhbG9nOmNhbmNlbFwiLCAoKSA9PiB7XG5cblx0XHRzZWxmLmN1cnJlbnREZWxldGlvbkluZGV4ID0gLTE7XG5cblx0fSk7XG5cbn07XG5cblN0b3J5TWFwLnByb3RvdHlwZS5zYXZlU2xpZGUgPSBmdW5jdGlvbiAoKSB7XG5cblx0Ly8gQWdhZmFyIGxlcyBkYWRlcyBkZSBsJ3NsaWRlSW5mb1BhbmVsIGkgZ3VhcmRhci1sZXMgYSBsJ29iamVjdGUgZGUgbCdzbGlkZVxuXHRjb25zdCBzbGlkZSA9IHRoaXMuY3JlYXRlU2xpZGVEYXRhKHRoaXMuc2xpZGVzLmxlbmd0aCwgdGhpcy5zbGlkZUluZm9QYW5lbC5nZXRVUkwoKSxcblx0XHR0aGlzLnNsaWRlSW5mb1BhbmVsLmdldFRpdG9sKCksIHRoaXMuc2xpZGVJbmZvUGFuZWwuZ2V0RGVzY3JpcGNpbygpKTtcblxuXHR0aGlzLnNsaWRlQmFyLnNldFNsaWRlVGl0bGUoc2xpZGUudGl0b2wpO1xuXHR0aGlzLnNsaWRlc1t0aGlzLmN1cnJlbnRTZWxlY3RlZEluZGV4XSA9IHNsaWRlO1xuXHR0aGlzLmlzRGlydHkgPSB0cnVlO1xuXG5cdC8vIEd1YXJkZW0gbGVzIGRhZGVzIGFsIHNlcnZpZG9yXG5cdHRoaXMuc2F2ZSgpLnRoZW4oKCkgPT4ge1xuXG5cdFx0dGhpcy5zbGlkZUluZm9QYW5lbC5zYXZlZCgpO1xuXG5cdH0pO1xuXG59O1xuXG5TdG9yeU1hcC5wcm90b3R5cGUuY3JlYXRlU2xpZGVEYXRhID0gZnVuY3Rpb24gKGlkLCB1cmwsIHRpdG9sLCBkZXNjcmlwY2lvKSB7XG5cblx0Y29uc3Qgc2xpZGVJZCA9IGlkIHx8IC0xO1xuXHRjb25zdCBzbGlkZVVSTCA9IHVybCB8fCBcIlwiO1xuXHRjb25zdCBzbGlkZVRpdG9sID0gdGl0b2wgfHwgXCJcIjtcblx0Y29uc3Qgc2xpZGVEZXNjID0gZGVzY3JpcGNpbyB8fCBcIlwiO1xuXG5cdGNvbnN0IGRhdGEgPSB7XG5cdFx0aWQ6IHNsaWRlSWQsXG5cdFx0dXJsX21hcGE6IHNsaWRlVVJMLFxuXHRcdHRpdG9sOiBzbGlkZVRpdG9sLFxuXHRcdGRlc2NyaXBjaW86IHNsaWRlRGVzYyxcblx0fTtcblxuXHRyZXR1cm4gZGF0YTtcblxufTtcblxuU3RvcnlNYXAucHJvdG90eXBlLl9hZGRTbGlkZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRjb25zdCBzZWxmID0gdGhpcztcblxuXHRjb25zdCBuID0gc2VsZi5zbGlkZXMubGVuZ3RoO1xuXHRpZiAobiA9PT0gc2VsZi5vcHRpb25zLm1heFNsaWRlcykge1xuXG5cdFx0c2VsZi5tYXhTbGlkZXNEaWFsb2cuc2hvdygpO1xuXG5cdH1cdGVsc2Uge1xuXG5cdFx0Y29uc3Qgc2xpZGUgPSBzZWxmLmNyZWF0ZVNsaWRlRGF0YShuKTtcblx0XHRzZWxmLnNsaWRlcy5wdXNoKHNsaWRlKTtcblx0XHR0aGlzLnNsaWRlQmFyLmFkZFNsaWRlKCk7XG5cdFx0JChzZWxmKS50cmlnZ2VyKFwiU3RvcnlNYXA6Y2hhbmdlZFwiKTtcblxuXHR9XG5cbn07XG5cblN0b3J5TWFwLnByb3RvdHlwZS5fc2xpZGVTZWxlY3RlZCA9IGZ1bmN0aW9uIChpbmRleCkge1xuXG5cdGlmICh0aGlzLnNsaWRlcyAhPSBudWxsKSB7XG5cblx0XHR0aGlzLmN1cnJlbnRTZWxlY3RlZEluZGV4ID0gaW5kZXg7XG5cdFx0Y29uc3QgY3VycmVudFNsaWRlID0gdGhpcy5zbGlkZXNbaW5kZXhdO1xuXHRcdHRoaXMuc2xpZGVJbmZvUGFuZWwuc2V0RGF0YShjdXJyZW50U2xpZGUudXJsX21hcGEsIGN1cnJlbnRTbGlkZS50aXRvbCwgY3VycmVudFNsaWRlLmRlc2NyaXBjaW8pO1xuXHRcdHRoaXMuc2xpZGVJbmZvUGFuZWwub3BlbigpO1xuXG5cdH1cblxufTtcblxuU3RvcnlNYXAucHJvdG90eXBlLl9zbGlkZURlbGV0ZVByZXNzZWQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcblxuXHRjb25zdCBkYXRhID0gdGhpcy5zbGlkZXNbaW5kZXhdO1xuXHRjb25zdCBzbGlkZVRpdGxlID0gKGRhdGEudGl0b2wgfHwgXCIodW50aXRsZWQpXCIpO1xuXG5cdHRoaXMuZGVsZXRlRGlhbG9nLnNldE1lc3NhZ2UodGhpcy5vcHRpb25zLnN0cmluZ3NbdGhpcy5vcHRpb25zLmxhbmd1YWdlXS5kZWxldGVcblx0XHQucmVwbGFjZShcIjw8bmFtZT4+XCIsIHNsaWRlVGl0bGUpKTtcblx0dGhpcy5kZWxldGVEaWFsb2cuc2hvdygpO1xuXG59O1xuXG5TdG9yeU1hcC5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRjb25zdCBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcblxuXHRpZiAoIXRoaXMuaXNEaXJ0eSkge1xuXG5cdFx0ZGVmZXJyZWQucmVzb2x2ZSgpO1xuXG5cdH0gZWxzZSBpZiAodGhpcy5pZFN0b3J5TWFwICE9PSBcIlwiKSB7XG5cblx0XHRpZiAodGhpcy5pZEVkaXRvciA9PT0gXCJcIikge1xuXG5cdFx0XHQvLyBqYSBleGlzdGVpeCBsJ3N0b3J5bWFwIGNyZWF0LiBFbnRyZW0gZW4gbW9kZSBlZGljacOzXG5cdFx0XHR0aGlzLnNlcnZlci5lZGl0TWFwU2xpZGVzKHRoaXMuaWRTdG9yeU1hcCkudGhlbihmdW5jdGlvbiAocmVzdWx0cykge1xuXG5cdFx0XHRcdHRoaXMuaWRFZGl0b3IgPSByZXN1bHRzLmlkX2VkaXRvcjtcblxuXHRcdFx0XHR0aGlzLnNlcnZlci51cGRhdGVNYXBTbGlkZXModGhpcy5pZEVkaXRvciwgdGhpcy5pZFN0b3J5TWFwLFxuXHRcdFx0XHRcdEpTT04uc3RyaW5naWZ5KHRoaXMuc2xpZGVzKSkudGhlbihcblxuXHRcdFx0XHRcdCgpID0+IHtcblxuXHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZSgpO1xuXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQoKSA9PiB7XG5cblx0XHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdCgpO1xuXG5cdFx0XHRcdFx0fSxcblxuXHRcdFx0XHQpO1xuXG5cdFx0XHR9LFxuXHRcdFx0KCkgPT4ge1xuXG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdCgpO1xuXG5cdFx0XHR9KTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdHRoaXMuc2VydmVyLnVwZGF0ZU1hcFNsaWRlcyh0aGlzLmlkRWRpdG9yLCB0aGlzLmlkU3RvcnlNYXAsXG5cdFx0XHRcdEpTT04uc3RyaW5naWZ5KHRoaXMuc2xpZGVzKSkudGhlbihcblxuXHRcdFx0XHQoKSA9PiB7XG5cblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKCk7XG5cblx0XHRcdFx0fSxcblx0XHRcdFx0KCkgPT4ge1xuXG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KCk7XG5cblx0XHRcdFx0fSxcblxuXHRcdFx0KTtcblxuXHRcdH1cblxuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gbm8gZXhpc3RlaXggbCdzdG9yeW1hcC4gRW4gY3JlZW0gdW4gZGUgbm91IGFtYiBsYSBpbmZvIGNvcnJlc3BvbmVudFxuXHRcdHRoaXMuc2VydmVyLm5ld01hcFNsaWRlcyhKU09OLnN0cmluZ2lmeSh0aGlzLnNsaWRlcykpLnRoZW4oKHJlc3VsdHMpID0+IHtcblxuXHRcdFx0dGhpcy5pZFN0b3J5TWFwID0gcmVzdWx0cy5pZDtcblx0XHRcdHRoaXMuaWRFZGl0b3IgPSByZXN1bHRzLmlkX2VkaXRvcjtcblx0XHRcdGRlZmVycmVkLnJlc29sdmUoKTtcblxuXHRcdH0sXG5cdFx0KCkgPT4ge1xuXG5cdFx0XHRkZWZlcnJlZC5yZWplY3QoKTtcblxuXHRcdH0pO1xuXG5cdH1cblxuXHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuXG59O1xuXG5TdG9yeU1hcC5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uIChpZCkge1xuXG5cdGNvbnN0IHNlbGYgPSB0aGlzO1xuXG5cdHNlbGYuaWRFZGl0b3IgPSBpZDtcblxuXHRzZWxmLnNlcnZlci5lZGl0TWFwU2xpZGVzKGlkKS50aGVuKChyZXN1bHRzKSA9PiB7XG5cblx0XHRzZWxmLmlzRGlydHkgPSBmYWxzZTtcblx0XHRzZWxmLnNsaWRlcyA9IEpTT04ucGFyc2UocmVzdWx0cy5zbGlkZXMpO1xuXHRcdHNlbGYuc2xpZGVCYXIuY2xlYXIoKTtcblx0XHRzZWxmLnNsaWRlQmFyLmFkZFNsaWRlcyhzZWxmLnNsaWRlcyk7XG5cblx0fSk7XG5cbn07XG5cblN0b3J5TWFwLnByb3RvdHlwZS5fc2xpZGVEZWxldGVDb25maXJtZWQgPSBmdW5jdGlvbiAoKSB7XG5cblx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cblx0c2VsZi5pc0RpcnR5ID0gdHJ1ZTtcblx0c2VsZi5zbGlkZXMuc3BsaWNlKHRoaXMuY3VycmVudERlbGV0aW9uSW5kZXgsIDEpO1xuXHRzZWxmLnNsaWRlQmFyLnJlbW92ZVNsaWRlKHRoaXMuY3VycmVudERlbGV0aW9uSW5kZXgpO1xuXG59O1xuXG5TdG9yeU1hcC5wcm90b3R5cGUucHVibGlzaCA9IGZ1bmN0aW9uICgpIHtcblxuXHRjb25zdCB1cmxFZGl0b3IgPSBgJHt0aGlzLm9wdGlvbnMuZWRpdG9yVVJMfT9pZD0ke3RoaXMuaWRFZGl0b3J9YDtcblx0Y29uc3QgdXJsVmlzb3IgPSBgJHt0aGlzLm9wdGlvbnMudmlld2VyVVJMfT9pZD0ke3RoaXMuaWRTdG9yeU1hcH1gO1xuXHRsZXQgbWVzc2FnZSA9IHRoaXMub3B0aW9ucy5zdHJpbmdzW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0ucHVibGlzaDtcblx0bWVzc2FnZSA9IG1lc3NhZ2UucmVwbGFjZSgvPDxlZGl0Pj4vZywgdXJsRWRpdG9yKTtcblx0bWVzc2FnZSA9IG1lc3NhZ2UucmVwbGFjZSgvPDx2aWV3Pj4vZywgdXJsVmlzb3IpO1xuXG5cdHRoaXMucHVibGlzaERpYWxvZy5zZXRNZXNzYWdlKG1lc3NhZ2UpO1xuXHR0aGlzLnB1Ymxpc2hEaWFsb2cuc2hvdygpO1xuXG59O1xuIiwiLyogZ2xvYmFsICQqL1xuXG5mdW5jdGlvbiBTdG9yeU1hcFNlcnZlcihvcHRpb25zKSB7XG5cblx0Y29uc3QgX2RlZmF1bHRPcHRpb25zID0ge1xuXG5cdFx0dXJsU3RvcnlNYXA6IFwiaHR0cDovLzE3Mi43MC4xLjMyL3N0b3J5bWFwcy9cIixcblxuXHR9O1xuXG5cdHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBfZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuXG59XG5cblN0b3J5TWFwU2VydmVyLnByb3RvdHlwZS5nZXRNYXBTbGlkZXMgPSBmdW5jdGlvbiAoaWRNYXBhKSB7XG5cblx0Ly8gRXhhbXBsZTogaHR0cDovLzE3Mi43MC4xLjMyL3N0b3J5bWFwcy83NjhkZGM2MC02NmUyLTExZTctYWY1ZS0wOWFmZjAwNzIzMGRcblx0cmV0dXJuICQuYWpheCh7XG5cblx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0dXJsOiB0aGlzLm9wdGlvbnMudXJsU3RvcnlNYXAgKyBpZE1hcGEsXG5cblx0fSk7XG5cbn07XG5cblN0b3J5TWFwU2VydmVyLnByb3RvdHlwZS5lZGl0TWFwU2xpZGVzID0gZnVuY3Rpb24gKGlkTWFwYUVkaXRpbmcpIHtcblxuXHQvLyBFeGFtcGxlOiBodHRwOi8vMTcyLjcwLjEuMzIvc3RvcnltYXBzL2VkaXQvNzZkMjFmMDAtNDhlMC00MjE2LWJiNTItODRhOGE0MWNjNmEyXG5cdHJldHVybiAkLmFqYXgoe1xuXG5cdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdHVybDogYCR7dGhpcy5vcHRpb25zLnVybFN0b3J5TWFwfWVkaXQvJHtpZE1hcGFFZGl0aW5nfWAsXG5cblx0fSk7XG5cbn07XG5TdG9yeU1hcFNlcnZlci5wcm90b3R5cGUubmV3TWFwU2xpZGVzID0gZnVuY3Rpb24gKGpzb25TbGlkZXMpIHtcblxuXHQvLyBodHRwOi8vMTcyLjcwLjEuMzIvc3RvcnltYXBzL2VkaXQvXG5cdHJldHVybiAkLmFqYXgoe1xuXG5cdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHR1cmw6IGAke3RoaXMub3B0aW9ucy51cmxTdG9yeU1hcH1lZGl0L2AsXG5cdFx0ZGF0YVR5cGU6IFwianNvblwiLFxuXHRcdGRhdGE6IHsgaWQ6IDAsIGlkX2VkaXRvcjogMCwgc2xpZGVzOiBqc29uU2xpZGVzIH0sXG5cblx0fSk7XG5cbn07XG5cblxuU3RvcnlNYXBTZXJ2ZXIucHJvdG90eXBlLnVwZGF0ZU1hcFNsaWRlcyA9IGZ1bmN0aW9uIChpZE1hcGFFZGl0aW5nLCBpZE1hcGEsIGpzb25TbGlkZXMpIHtcblxuXHRyZXR1cm4gJC5hamF4KHtcblxuXHRcdG1ldGhvZDogXCJQVVRcIixcblx0XHR1cmw6IGAke3RoaXMub3B0aW9ucy51cmxTdG9yeU1hcH1lZGl0LyR7aWRNYXBhRWRpdGluZ31gLFxuXHRcdGRhdGFUeXBlOiBcImpzb25cIixcblx0XHRkYXRhOiB7IGlkOiBpZE1hcGEsIGlkX2VkaXRvcjogaWRNYXBhRWRpdGluZywgc2xpZGVzOiBqc29uU2xpZGVzIH0sXG5cblx0fSk7XG5cbn07XG5cblN0b3J5TWFwU2VydmVyLnByb3RvdHlwZS5kZWxldGVNYXBTbGlkZXMgPSBmdW5jdGlvbiAoaWRNYXBhRWRpdGluZywgaWRNYXBhKSB7XG5cblx0JC5hamF4KHtcblxuXHRcdG1ldGhvZDogXCJERUxFVEVcIixcblx0XHR1cmw6IGAke3RoaXMub3B0aW9ucy51cmxTdG9yeU1hcH1lZGl0LyR7aWRNYXBhRWRpdGluZ30vJHtpZE1hcGF9YCxcblx0XHRjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG5cblx0fSlcblx0XHQuZG9uZSgoKSA9PiB7XG5cblx0XHR9KTtcblxufTtcbiIsIi8qIGV4cG9ydGVkIFV0aWxzICovXG5jb25zdCBVdGlscyA9IHtcblxuXHRpc1ZhbGlkVVJMKHVybCkge1xuXG5cdFx0Y29uc3QgZXhwcmVzc2lvbiA9IC9odHRwcz86XFwvXFwvKHd3d1xcLik/Wy1hLXpBLVowLTlAOiUuX1xcXFwrfiM9XXsyLDI1Nn1cXC5bYS16XXsyLDZ9XFxiKFstYS16QS1aMC05QDolX1xcXFwrLn4jPyYvLz1dKikvZ2k7XG5cdFx0Y29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGV4cHJlc3Npb24pO1xuXG5cdFx0cmV0dXJuIHJlZ2V4LnRlc3QodXJsKTtcblxuXHR9LFxuXG5cdGlzTm90RW1wdHkodGV4dCkge1xuXG5cdFx0cmV0dXJuICh0ZXh0LnRyaW0oKSAhPT0gXCJcIik7XG5cblx0fSxcblxuXHRnZXRSYW5kb21MZXR0ZXIoKSB7XG5cblx0XHRyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSg2NSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI2KSk7XG5cblx0fSxcblxuXHRnZXRSYW5kb21JZCgpIHtcblxuXHRcdHJldHVybiBVdGlscy5nZXRSYW5kb21MZXR0ZXIoKSArIERhdGUubm93KCk7XG5cblx0fSxcblxufTtcbiJdfQ==
