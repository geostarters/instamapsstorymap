function Dialog(t){const o={templateId:"#dialog_template",messageTextId:"#msg",showCancelButton:!0,cancelButtonClass:".btn-ko",confirmButtonClass:".btn-ok",closeButtonClass:".close"};this.options=$.extend(!0,{},o,t),this.setupDialog(),this.addEvents()}Dialog.prototype.setupDialog=function(){const t=Utils.getRandomId();this.id=`#${t}`,this.template=_.template($(this.options.templateId).html().trim()),$("body").append(this.template({id:t})),this.options.showCancelButton||$(`${this.id} ${this.cancelButtonClass}`).hide()},Dialog.prototype.addEvents=function(){const t=this;$(`${t.id} ${t.options.confirmButtonClass}`).on("click",()=>{t.hide(),$(t).trigger("Dialog:accept")}),$(`${t.id} ${t.options.closeButtonClass}`).on("click",()=>{t.hide(),$(t).trigger("Dialog:cancel")}),$(`${t.id} ${t.options.cancelButtonClass}`).on("click",()=>{t.hide(),$(t).trigger("Dialog:cancel")})},Dialog.prototype.setMessage=function(t){$(`${this.id} ${this.options.messageTextId}`).html(`<span>${t}</span>`)},Dialog.prototype.show=function(){$(this.id).show()},Dialog.prototype.hide=function(){$(this.id).hide()};
function SlideBar(i){const e={maxSlides:10,slideIconRegex:/^slide-icon-\w+$/,slidesContainerId:"#slidesContainer",slideListId:"#slideList",addSlideButton:"#storymap_add_slide"};this.options=$.extend(!0,{},e,i),this.addEvents()}SlideBar.prototype.addEvents=function(){const i=this;$(i.options.addSlideButton).click(()=>{$(i).trigger("SlideBar:addSlidePressed")})},SlideBar.prototype.addSlide=function(i){const e=this,t=i||void 0===i,d=new SlideIcon;d.appendTo(this.options.slideListId),$(d).on("Slide:deletePressed",(i,t)=>{$(e).trigger("SlideBar:deleteSlidePressed",[t])}),$(d).on("Slide:selected",(i,t)=>{e.slideSelectedId=t,$(e).trigger("SlideBar:slideSelected",[t])}),$(this.options.slidesContainerId).scrollTop(Math.max(0,$(this.options.slideListId).height()-$(this.options.slideListId).parent().height())),t&&d.clicked()},SlideBar.prototype.addSlides=function(i){for(let e=0,t=i.length;e<t;++e)this.addSlide(e===t-1),$(`${this.options.slideListId} li:nth-child(${e+1})>.slide-title`).html(i[e].titol)},SlideBar.prototype.removeSlide=function(i){$(`${this.options.slideListId} li:nth-child(${i+1})`).remove()},SlideBar.prototype.setSlideTitle=function(i){$(`${this.options.slideListId} li.selected>.slide-title`).html(i)},SlideBar.prototype.clear=function(){$(`${this.options.slideListId}`).html("")};
function SlideIcon(e){const t={text:"",templateId:"#storymap_slide_template",slideClass:".slide"};this.options=$.extend(!0,{},t,e),this.template=_.template($(this.options.templateId).html().trim()),this.slideDOMElem=$(this.template(this.options)),this.deleteDOMElem=$('<a class="close" href="javascript:">&nbsp;</a>'),this.addEvents()}SlideIcon.prototype.addEvents=function(){const e=this;e.slideDOMElem.click(()=>{e.clicked()}),e.deleteDOMElem.click(()=>{e.deleteButtonPressed()})},SlideIcon.prototype.clicked=function(){const e=this,t=$(e.options.slideClass).index(e.slideDOMElem);return $(":focus").blur(),$(`${this.options.slideClass}.selected`).removeClass("selected"),$(e.slideDOMElem).addClass("selected"),$(e).trigger("Slide:selected",[t]),!1},SlideIcon.prototype.deleteButtonPressed=function(){const e=this,t=$(e.options.slideClass).index(e.slideDOMElem);$(e).trigger("Slide:deletePressed",[t])},SlideIcon.prototype.appendTo=function(e){this.slideDOMElem.appendTo(e),this.deleteDOMElem.appendTo(this.slideDOMElem)};
function SlideInfo(t,o){const e={urlInputId:"#urlMap",urlLoadButtonId:"#storymap_load",urlClearButtonId:"#storymap_unload",urlFormGroup:"#urlFormGroup",urlFeedback:"#urlMapFeedback",titleInputId:"#title",titleFormGroup:"#titleFormGroup",titleFeedback:"#titleFeedback",infoButtonId:"#obrir_menu",saveSlideButtonId:"#storymap_save_slide",resetSlideButtonId:"#storymap_reset_slide",textInputId:"#summernote",iFrameId:"#instamapsMap",noURLId:"#noURLLoaded",iFrameContainerId:"#mapaFrame",dataContainerId:"#dataSection",spinnerId:"#saveSlideSpinner",defaultUrl:"https://www.instamaps.cat/geocatweb/visor.html?embed=1"};this.options=$.extend(!0,{},e,o),this.isDirty=!1,this.addEvents(),this.setupSummernote(),this.reset()}SlideInfo.prototype.addEvents=function(){const t=this;$(t.options.urlLoadButtonId).on("click",()=>{t.setURL()}),$(t.options.urlClearButtonId).on("click",()=>{$(t.options.urlInputId).val(""),$(t.options.iFrameId).hide(),$(t.options.noURLId).show(),t.disableURLButtons(!1),t.disableSlideInputs(!1)}),$(t.options.infoButtonId).on("click",()=>{$(t.options.iFrameContainerId).hasClass("expanded")?t.open():t.close()}),$(t.options.saveSlideButtonId).on("click",()=>{t.enableSaving(!1),$(t.options.spinnerId).show(),t.disableSlideInputs(),$(t).trigger("SlideInfo:saveSlidePressed")}),$(t.options.resetSlideButtonId).on("click",()=>{t.reset(!1),t.setDirty(!0)}),$(t.options.urlInputId).on("input",()=>{t.checkURL()}),$(t.options.titleInputId).on("input",()=>{t.checkTitol()}),$(t.options.textInputId).on("summernote.change",()=>{t.checkText()})},SlideInfo.prototype.setupSummernote=function(){$(this.options.textInputId).summernote({disableDragAndDrop:!0,toolbar:[["style",["color"]],["style",["style"]],["style",["bold","underline","clear"]],["style",["fontname"]],["para",["ul","ol","paragraph"]],["insert",["table"]],["insert",["link","picture","video"]],["misc",["fullscreen","codeview","help"]]]}),$(".note-group-select-from-files").hide()},SlideInfo.prototype.checkURL=function(){const t=$(this.options.urlInputId).val();Utils.isValidURL(t)?(this.enableURLButtons(),this.setDirty(!0)):(this.disableURLButtons(),this.disableSlideInputs(!1))},SlideInfo.prototype.enableURLButtons=function(){$(this.options.urlFormGroup).removeClass("has-error"),$(this.options.urlFeedback).hide(),$(this.options.urlLoadButtonId).prop("disabled",!1),$(this.options.urlClearButtonId).prop("disabled",!1)},SlideInfo.prototype.enableSlideInputs=function(){$(this.options.titleFormGroup).removeClass("has-error"),$(this.options.titleFeedback).hide(),$(this.options.textInputId).summernote("enable"),$(this.options.titleInputId).prop("disabled",!1),$(this.options.resetSlideButtonId).prop("disabled",!1),$(this.options.saveSlideButtonId).prop("disabled",!1)},SlideInfo.prototype.disableURLButtons=function(t){(t||void 0===t)&&($(this.options.urlFormGroup).addClass("has-error"),$(this.options.urlFeedback).show()),$(this.options.urlLoadButtonId).prop("disabled",!0),$(this.options.urlClearButtonId).prop("disabled",!0)},SlideInfo.prototype.disableSlideInputs=function(t){(t||void 0===t)&&($(this.options.titleFormGroup).addClass("has-error"),$(this.options.titleFeedback).show()),$(this.options.textInputId).summernote("disable"),$(this.options.resetSlideButtonId).prop("disabled",!0),$(this.options.saveSlideButtonId).prop("disabled",!0),$(this.options.titleInputId).prop("disabled",!0)},SlideInfo.prototype.checkTitol=function(){const t=$(this.options.titleInputId).val();Utils.isNotEmpty(t)&&this.setDirty(!0)},SlideInfo.prototype.checkText=function(){const t=$(this.options.textInputId).summernote("code");Utils.isNotEmpty(t)&&this.setDirty(!0)},SlideInfo.prototype.setDirty=function(t){this.isDirty=t,this.enableSaving(t)},SlideInfo.prototype.setURL=function(){const t=this,o=$(t.options.urlInputId).val();$(t.options.iFrameId).attr("src",o),$(this.options.noURLId).hide(),$(this.options.iFrameId).show(),t.enableSlideInputs()},SlideInfo.prototype.getURL=function(){return $(this.options.urlInputId).val()},SlideInfo.prototype.getTitol=function(){return $(this.options.titleInputId).val()},SlideInfo.prototype.getDescripcio=function(){return $(this.options.textInputId).summernote("code")},SlideInfo.prototype.reset=function(t){const o=t||void 0===t;$(this.options.titleInputId).val(""),$(this.options.textInputId).summernote("code",""),$(this.options.titleFormGroup).removeClass("has-error"),$(this.options.titleFeedback).hide(),o&&($(this.options.urlInputId).val(""),$(this.options.iFrameId).hide(),$(this.options.noURLId).show(),$(this.options.textInputId).summernote("disable"))},SlideInfo.prototype.setData=function(t,o,e){t&&""!==t?($(this.options.iFrameId).attr("src",t),$(this.options.noURLId).hide(),$(this.options.iFrameId).show(),this.enableSlideInputs(),this.enableURLButtons()):($(this.options.iFrameId).hide(),$(this.options.noURLId).show(),this.disableSlideInputs(),this.disableURLButtons()),$(this.options.urlInputId).val(t),$(this.options.titleInputId).val(o),$(this.options.textInputId).summernote("code",e)},SlideInfo.prototype.close=function(){$(this.options.iFrameContainerId).removeClass("collapsed"),$(this.options.iFrameContainerId).addClass("expanded"),$(this.options.dataContainerId).hide()},SlideInfo.prototype.open=function(){$(this.options.iFrameContainerId).removeClass("expanded"),$(this.options.iFrameContainerId).addClass("collapsed"),$(this.options.dataContainerId).show()},SlideInfo.prototype.enableSaving=function(t){$(this.options.saveSlideButtonId).prop("disabled",!t)},SlideInfo.prototype.saved=function(){this.enableSlideInputs(),this.setDirty(!1),$(this.options.spinnerId).hide()};
function StoryMap(e){const i={language:"en",maxSlides:10,strings:{en:{maxSlides:"Maximum number of slides reached",publish:"<b>To edit go to:</b> <a target='_blank' href='<<edit>>'><<edit>></a> <br><br><b>To view go to:</b> <a target='_blank' href='<<view>>'><<view>></a>",delete:'Delete "<<name>>" slide?'},ca:{maxSlides:"Màxim número de slides assolit",publish:"<b>Per editar vés a:</b> <a target='_blank' href='<<edit>>'><<edit>></a> <br><br><b>Per veure vés a:</b> <a target='_blank' href='<<view>>'><<view>></a>",delete:'Elimina la diapositiva "<<name>>"?'},es:{maxSlides:"Has llegado al número máximo de slides",publish:"<b>Para editar ve a:</b> <a target='_blank' href='<<edit>>'><<edit>></a> <br><br><b>Para ver ve a:</b> <a target='_blank' href='<<view>>'><<view>></a>",delete:'Elimina la diapositiva "<<name>>"?'}},editorURL:"https://www.instamaps.cat/storymap/editor.html",viewerURL:"https://www.instamaps.cat/storymap/visor.html"};this.options=$.extend(!0,{},i,e),this.isDirty=!1,this.currentDeletionIndex=-1,this.currentSelectedIndex=-1,this.slides=[],this.idEditor="",this.idStoryMap="",this.slideBar=new SlideBar,this.slideInfoPanel=new SlideInfo,this.deleteDialog=new Dialog,this.maxSlidesDialog=new Dialog({showCancelButton:!1}),this.maxSlidesDialog.setMessage(this.options.strings[this.options.language].maxSlides),this.publishDialog=new Dialog({showCancelButton:!1}),this.server=new StoryMapServer,this.addEvents(),this._addSlide()}StoryMap.prototype.addEvents=function(){const e=this;$(e.slideInfoPanel).on("SlideInfo:saveSlidePressed",()=>{e.saveSlide()}),$(e.slideBar).on("SlideBar:slideSelected",(i,t)=>{e._slideSelected(t)}),$(e.slideBar).on("SlideBar:addSlidePressed",()=>{e._addSlide()}),$(e.slideBar).on("SlideBar:deleteSlidePressed",(i,t)=>{e.currentDeletionIndex=t,e._slideDeletePressed(t)}),$(e.deleteDialog).on("Dialog:accept",()=>{e._slideDeleteConfirmed(),this.currentSelectedIndex===this.currentDeletionIndex&&this.slideInfoPanel.clear(),e.currentDeletionIndex=-1}),$(e.deleteDialog).on("Dialog:cancel",()=>{e.currentDeletionIndex=-1})},StoryMap.prototype.saveSlide=function(){const e=this.createSlideData(this.slides.length,this.slideInfoPanel.getURL(),this.slideInfoPanel.getTitol(),this.slideInfoPanel.getDescripcio());this.slideBar.setSlideTitle(e.titol),this.slides[this.currentSelectedIndex]=e,this.isDirty=!0,this.save().then(()=>{this.slideInfoPanel.saved()})},StoryMap.prototype.createSlideData=function(e,i,t,s){return{id:e||-1,url_mapa:i||"",titol:t||"",descripcio:s||""}},StoryMap.prototype._addSlide=function(){const e=this,i=e.slides.length;if(i===e.options.maxSlides)e.maxSlidesDialog.show();else{const t=e.createSlideData(i);e.slides.push(t),this.slideBar.addSlide(),$(e).trigger("StoryMap:changed")}},StoryMap.prototype._slideSelected=function(e){if(null!=this.slides){this.currentSelectedIndex=e;const i=this.slides[e];this.slideInfoPanel.setData(i.url_mapa,i.titol,i.descripcio),this.slideInfoPanel.open()}},StoryMap.prototype._slideDeletePressed=function(e){const i=this.slides[e].titol||"(untitled)";this.deleteDialog.setMessage(this.options.strings[this.options.language].delete.replace("<<name>>",i)),this.deleteDialog.show()},StoryMap.prototype.save=function(){const e=$.Deferred();return this.isDirty?""!==this.idStoryMap?""===this.idEditor?this.server.editMapSlides(this.idStoryMap).then(function(i){this.idEditor=i.id_editor,this.server.updateMapSlides(this.idEditor,this.idStoryMap,JSON.stringify(this.slides)).then(()=>{e.resolve()},()=>{e.reject()})},()=>{e.reject()}):this.server.updateMapSlides(this.idEditor,this.idStoryMap,JSON.stringify(this.slides)).then(()=>{e.resolve()},()=>{e.reject()}):this.server.newMapSlides(JSON.stringify(this.slides)).then(i=>{this.idStoryMap=i.id,this.idEditor=i.id_editor,e.resolve()},()=>{e.reject()}):e.resolve(),e.promise()},StoryMap.prototype.load=function(e){const i=this;i.idEditor=e,i.server.editMapSlides(e).then(e=>{i.isDirty=!1,i.idStoryMap=e.id,i.slides=JSON.parse(e.slides),i.slideBar.clear(),i.slideBar.addSlides(i.slides)})},StoryMap.prototype._slideDeleteConfirmed=function(){const e=this;e.isDirty=!0,e.slides.splice(this.currentDeletionIndex,1),e.slideBar.removeSlide(this.currentDeletionIndex)},StoryMap.prototype.publish=function(){const e=`${this.options.editorURL}?id=${this.idEditor}`,i=`${this.options.viewerURL}?id=${this.idStoryMap}`;let t=this.options.strings[this.options.language].publish;t=(t=t.replace(/<<edit>>/g,e)).replace(/<<view>>/g,i),this.publishDialog.setMessage(t),this.publishDialog.show()};
function StoryMapServer(t){const o={urlStoryMap:"http://172.70.1.32/storymaps/"};this.options=$.extend(!0,{},o,t)}StoryMapServer.prototype.getMapSlides=function(t){return $.ajax({method:"GET",url:this.options.urlStoryMap+t})},StoryMapServer.prototype.editMapSlides=function(t){return $.ajax({method:"GET",url:`${this.options.urlStoryMap}edit/${t}`})},StoryMapServer.prototype.newMapSlides=function(t){return $.ajax({method:"POST",url:`${this.options.urlStoryMap}edit/`,dataType:"json",data:{id:0,id_editor:0,slides:t}})},StoryMapServer.prototype.updateMapSlides=function(t,o,e){return $.ajax({method:"PUT",url:`${this.options.urlStoryMap}edit/${t}`,dataType:"json",data:{id:o,id_editor:t,slides:e}})},StoryMapServer.prototype.deleteMapSlides=function(t,o){$.ajax({method:"DELETE",url:`${this.options.urlStoryMap}edit/${t}/${o}`,contentType:"application/json"}).done(()=>{})};
const Utils={isValidURL(t){const e=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/gi;return new RegExp(e).test(t)},isNotEmpty:t=>""!==t.trim(),getRandomLetter:()=>String.fromCharCode(65+Math.floor(26*Math.random())),getRandomId:()=>Utils.getRandomLetter()+Date.now()};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpYWxvZy5qcyIsInNsaWRlQmFyLmpzIiwic2xpZGVJY29uLmpzIiwic2xpZGVJbmZvLmpzIiwic3RvcnlNYXAuanMiLCJzdG9yeU1hcFNlcnZlci5qcyIsInV0aWxzLmpzIl0sIm5hbWVzIjpbIkRpYWxvZyIsIm9wdGlvbnMiLCJfZGVmYXVsdE9wdGlvbnMiLCJ0ZW1wbGF0ZUlkIiwibWVzc2FnZVRleHRJZCIsInNob3dDYW5jZWxCdXR0b24iLCJjYW5jZWxCdXR0b25DbGFzcyIsImNvbmZpcm1CdXR0b25DbGFzcyIsImNsb3NlQnV0dG9uQ2xhc3MiLCJ0aGlzIiwiJCIsImV4dGVuZCIsInNldHVwRGlhbG9nIiwiYWRkRXZlbnRzIiwicHJvdG90eXBlIiwiaWQiLCJVdGlscyIsImdldFJhbmRvbUlkIiwidGVtcGxhdGUiLCJfIiwiaHRtbCIsInRyaW0iLCJhcHBlbmQiLCJoaWRlIiwic2VsZiIsIm9uIiwidHJpZ2dlciIsInNldE1lc3NhZ2UiLCJtc2ciLCJzaG93IiwiU2xpZGVCYXIiLCJtYXhTbGlkZXMiLCJzbGlkZUljb25SZWdleCIsInNsaWRlc0NvbnRhaW5lcklkIiwic2xpZGVMaXN0SWQiLCJhZGRTbGlkZUJ1dHRvbiIsImNsaWNrIiwiYWRkU2xpZGUiLCJzaG91bGRDbGljayIsInVuZGVmaW5lZCIsInNsaWRlIiwiU2xpZGVJY29uIiwiYXBwZW5kVG8iLCJldmVudCIsInNsaWRlU2VsZWN0ZWRJZCIsInNjcm9sbFRvcCIsIk1hdGgiLCJtYXgiLCJoZWlnaHQiLCJwYXJlbnQiLCJjbGlja2VkIiwiYWRkU2xpZGVzIiwic2xpZGVzIiwiaSIsImxlbiIsImxlbmd0aCIsInRpdG9sIiwicmVtb3ZlU2xpZGUiLCJyZW1vdmUiLCJzZXRTbGlkZVRpdGxlIiwidGV4dCIsImNsZWFyIiwic2xpZGVDbGFzcyIsInNsaWRlRE9NRWxlbSIsImRlbGV0ZURPTUVsZW0iLCJkZWxldGVCdXR0b25QcmVzc2VkIiwiY3VycmVudFNsaWRlSW5kZXgiLCJpbmRleCIsImJsdXIiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiU2xpZGVJbmZvIiwidXJsSW5wdXRJZCIsInVybExvYWRCdXR0b25JZCIsInVybENsZWFyQnV0dG9uSWQiLCJ1cmxGb3JtR3JvdXAiLCJ1cmxGZWVkYmFjayIsInRpdGxlSW5wdXRJZCIsInRpdGxlRm9ybUdyb3VwIiwidGl0bGVGZWVkYmFjayIsImluZm9CdXR0b25JZCIsInNhdmVTbGlkZUJ1dHRvbklkIiwicmVzZXRTbGlkZUJ1dHRvbklkIiwidGV4dElucHV0SWQiLCJpRnJhbWVJZCIsIm5vVVJMSWQiLCJpRnJhbWVDb250YWluZXJJZCIsImRhdGFDb250YWluZXJJZCIsInNwaW5uZXJJZCIsImRlZmF1bHRVcmwiLCJpc0RpcnR5Iiwic2V0dXBTdW1tZXJub3RlIiwicmVzZXQiLCJzZXRVUkwiLCJ2YWwiLCJkaXNhYmxlVVJMQnV0dG9ucyIsImRpc2FibGVTbGlkZUlucHV0cyIsImhhc0NsYXNzIiwib3BlbiIsImNsb3NlIiwiZW5hYmxlU2F2aW5nIiwic2V0RGlydHkiLCJjaGVja1VSTCIsImNoZWNrVGl0b2wiLCJjaGVja1RleHQiLCJzdW1tZXJub3RlIiwiZGlzYWJsZURyYWdBbmREcm9wIiwidG9vbGJhciIsInVybCIsImlzVmFsaWRVUkwiLCJlbmFibGVVUkxCdXR0b25zIiwicHJvcCIsImVuYWJsZVNsaWRlSW5wdXRzIiwic2hvd0ZlZWRiYWNrIiwiaXNOb3RFbXB0eSIsImF0dHIiLCJnZXRVUkwiLCJnZXRUaXRvbCIsImdldERlc2NyaXBjaW8iLCJkZWxldGVVUkwiLCJzaG91bGREZWxldGVVUkwiLCJzZXREYXRhIiwiZGVzY3JpcGNpbyIsInNob3VsZEVuYWJsZSIsInNhdmVkIiwiU3RvcnlNYXAiLCJsYW5ndWFnZSIsInN0cmluZ3MiLCJlbiIsInB1Ymxpc2giLCJkZWxldGUiLCJjYSIsImVzIiwiZWRpdG9yVVJMIiwidmlld2VyVVJMIiwiY3VycmVudERlbGV0aW9uSW5kZXgiLCJjdXJyZW50U2VsZWN0ZWRJbmRleCIsImlkRWRpdG9yIiwiaWRTdG9yeU1hcCIsInNsaWRlQmFyIiwic2xpZGVJbmZvUGFuZWwiLCJkZWxldGVEaWFsb2ciLCJtYXhTbGlkZXNEaWFsb2ciLCJwdWJsaXNoRGlhbG9nIiwic2VydmVyIiwiU3RvcnlNYXBTZXJ2ZXIiLCJfYWRkU2xpZGUiLCJzYXZlU2xpZGUiLCJfc2xpZGVTZWxlY3RlZCIsIl9zbGlkZURlbGV0ZVByZXNzZWQiLCJfc2xpZGVEZWxldGVDb25maXJtZWQiLCJjcmVhdGVTbGlkZURhdGEiLCJzYXZlIiwidGhlbiIsInVybF9tYXBhIiwibiIsInB1c2giLCJjdXJyZW50U2xpZGUiLCJzbGlkZVRpdGxlIiwicmVwbGFjZSIsImRlZmVycmVkIiwiRGVmZXJyZWQiLCJlZGl0TWFwU2xpZGVzIiwicmVzdWx0cyIsImlkX2VkaXRvciIsInVwZGF0ZU1hcFNsaWRlcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXNvbHZlIiwicmVqZWN0IiwibmV3TWFwU2xpZGVzIiwicHJvbWlzZSIsImxvYWQiLCJwYXJzZSIsInNwbGljZSIsInVybEVkaXRvciIsInVybFZpc29yIiwibWVzc2FnZSIsInVybFN0b3J5TWFwIiwiZ2V0TWFwU2xpZGVzIiwiaWRNYXBhIiwiYWpheCIsIm1ldGhvZCIsImlkTWFwYUVkaXRpbmciLCJqc29uU2xpZGVzIiwiZGF0YVR5cGUiLCJkYXRhIiwiZGVsZXRlTWFwU2xpZGVzIiwiY29udGVudFR5cGUiLCJkb25lIiwiW29iamVjdCBPYmplY3RdIiwiZXhwcmVzc2lvbiIsIlJlZ0V4cCIsInRlc3QiLCJnZXRSYW5kb21MZXR0ZXIiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJmbG9vciIsInJhbmRvbSIsIkRhdGUiLCJub3ciXSwibWFwcGluZ3MiOiJBQUVBLFNBQVNBLE9BQU9DLEdBRWYsTUFBTUMsR0FDTEMsV0FBWSxtQkFDWkMsY0FBZSxPQUNmQyxrQkFBa0IsRUFDbEJDLGtCQUFtQixVQUNuQkMsbUJBQW9CLFVBQ3BCQyxpQkFBa0IsVUFHbkJDLEtBQUtSLFFBQVVTLEVB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T0FBT0QsR0FFWkUsS0FBS3JGLElBSW5CTSxXQUFXdEQsR0FFYyxLQUFoQkEsRUFBS3ZDLE9BSWQ2SyxnQkFBZSxJQUVQQyxPQUFPQyxhQUFhLEdBQUt0SixLQUFLdUosTUFBc0IsR0FBaEJ2SixLQUFLd0osV0FJakRyTCxZQUFXLElBRUhELE1BQU1rTCxrQkFBb0JLLEtBQUtDIiwiZmlsZSI6InN0b3J5bWFwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCAkLCBfLCBVdGlscyovXG5cbmZ1bmN0aW9uIERpYWxvZyhvcHRpb25zKSB7XG5cblx0Y29uc3QgX2RlZmF1bHRPcHRpb25zID0ge1xuXHRcdHRlbXBsYXRlSWQ6IFwiI2RpYWxvZ190ZW1wbGF0ZVwiLFxuXHRcdG1lc3NhZ2VUZXh0SWQ6IFwiI21zZ1wiLFxuXHRcdHNob3dDYW5jZWxCdXR0b246IHRydWUsXG5cdFx0Y2FuY2VsQnV0dG9uQ2xhc3M6IFwiLmJ0bi1rb1wiLFxuXHRcdGNvbmZpcm1CdXR0b25DbGFzczogXCIuYnRuLW9rXCIsXG5cdFx0Y2xvc2VCdXR0b25DbGFzczogXCIuY2xvc2VcIixcblx0fTtcblxuXHR0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgX2RlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcblxuXHR0aGlzLnNldHVwRGlhbG9nKCk7XG5cdHRoaXMuYWRkRXZlbnRzKCk7XG5cbn1cblxuRGlhbG9nLnByb3RvdHlwZS5zZXR1cERpYWxvZyA9IGZ1bmN0aW9uICgpIHtcblxuXHRjb25zdCBpZCA9IFV0aWxzLmdldFJhbmRvbUlkKCk7XG5cdHRoaXMuaWQgPSBgIyR7aWR9YDtcblxuXHR0aGlzLnRlbXBsYXRlID0gXy50ZW1wbGF0ZSgkKHRoaXMub3B0aW9ucy50ZW1wbGF0ZUlkKS5odG1sKCkudHJpbSgpKTtcblx0JChcImJvZHlcIikuYXBwZW5kKHRoaXMudGVtcGxhdGUoeyBpZCB9KSk7XG5cblx0aWYgKCF0aGlzLm9wdGlvbnMuc2hvd0NhbmNlbEJ1dHRvbikge1xuXG5cdFx0JChgJHt0aGlzLmlkfSAke3RoaXMuY2FuY2VsQnV0dG9uQ2xhc3N9YCkuaGlkZSgpO1xuXG5cdH1cblxufTtcblxuRGlhbG9nLnByb3RvdHlwZS5hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cblx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cblx0JChgJHtzZWxmLmlkfSAke3NlbGYub3B0aW9ucy5jb25maXJtQnV0dG9uQ2xhc3N9YCkub24oXCJjbGlja1wiLCAoKSA9PiB7XG5cblx0XHRzZWxmLmhpZGUoKTtcblx0XHQkKHNlbGYpLnRyaWdnZXIoXCJEaWFsb2c6YWNjZXB0XCIpO1xuXG5cdH0pO1xuXG5cdCQoYCR7c2VsZi5pZH0gJHtzZWxmLm9wdGlvbnMuY2xvc2VCdXR0b25DbGFzc31gKS5vbihcImNsaWNrXCIsICgpID0+IHtcblxuXHRcdHNlbGYuaGlkZSgpO1xuXHRcdCQoc2VsZikudHJpZ2dlcihcIkRpYWxvZzpjYW5jZWxcIik7XG5cblx0fSk7XG5cblx0JChgJHtzZWxmLmlkfSAke3NlbGYub3B0aW9ucy5jYW5jZWxCdXR0b25DbGFzc31gKS5vbihcImNsaWNrXCIsICgpID0+IHtcblxuXHRcdHNlbGYuaGlkZSgpO1xuXHRcdCQoc2VsZikudHJpZ2dlcihcIkRpYWxvZzpjYW5jZWxcIik7XG5cblx0fSk7XG5cbn07XG5cbkRpYWxvZy5wcm90b3R5cGUuc2V0TWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcblxuXHQkKGAke3RoaXMuaWR9ICR7dGhpcy5vcHRpb25zLm1lc3NhZ2VUZXh0SWR9YCkuaHRtbChgPHNwYW4+JHttc2d9PC9zcGFuPmApO1xuXG59O1xuXG5EaWFsb2cucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7XG5cblx0JCh0aGlzLmlkKS5zaG93KCk7XG5cbn07XG5cbkRpYWxvZy5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uICgpIHtcblxuXHQkKHRoaXMuaWQpLmhpZGUoKTtcblxufTtcbiIsIi8qIGdsb2JhbCAkLCBTbGlkZUljb24qL1xuXG5mdW5jdGlvbiBTbGlkZUJhcihvcHRpb25zKSB7XG5cblx0Y29uc3QgX2RlZmF1bHRPcHRpb25zID0ge1xuXHRcdG1heFNsaWRlczogMTAsXG5cdFx0c2xpZGVJY29uUmVnZXg6IC9ec2xpZGUtaWNvbi1cXHcrJC8sXG5cdFx0c2xpZGVzQ29udGFpbmVySWQ6IFwiI3NsaWRlc0NvbnRhaW5lclwiLFxuXHRcdHNsaWRlTGlzdElkOiBcIiNzbGlkZUxpc3RcIixcblx0XHRhZGRTbGlkZUJ1dHRvbjogXCIjc3RvcnltYXBfYWRkX3NsaWRlXCIsXG5cblx0fTtcblxuXHR0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgX2RlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcblxuXHR0aGlzLmFkZEV2ZW50cygpO1xuXG59XG5cblNsaWRlQmFyLnByb3RvdHlwZS5hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cblx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cblx0JChzZWxmLm9wdGlvbnMuYWRkU2xpZGVCdXR0b24pLmNsaWNrKCgpID0+IHtcblxuXHRcdCQoc2VsZikudHJpZ2dlcihcIlNsaWRlQmFyOmFkZFNsaWRlUHJlc3NlZFwiKTtcblxuXHR9KTtcblxufTtcblxuU2xpZGVCYXIucHJvdG90eXBlLmFkZFNsaWRlID0gZnVuY3Rpb24gKGNsaWNrKSB7XG5cblx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cdGNvbnN0IHNob3VsZENsaWNrID0gY2xpY2sgfHwgKGNsaWNrID09PSB1bmRlZmluZWQpO1xuXG5cdGNvbnN0IHNsaWRlID0gbmV3IFNsaWRlSWNvbigpO1xuXHRzbGlkZS5hcHBlbmRUbyh0aGlzLm9wdGlvbnMuc2xpZGVMaXN0SWQpO1xuXG5cdCQoc2xpZGUpLm9uKFwiU2xpZGU6ZGVsZXRlUHJlc3NlZFwiLCAoZXZlbnQsIGlkKSA9PiB7XG5cblx0XHQkKHNlbGYpLnRyaWdnZXIoXCJTbGlkZUJhcjpkZWxldGVTbGlkZVByZXNzZWRcIiwgW2lkXSk7XG5cblx0fSk7XG5cblx0JChzbGlkZSkub24oXCJTbGlkZTpzZWxlY3RlZFwiLCAoZXZlbnQsIGlkKSA9PiB7XG5cblx0XHRzZWxmLnNsaWRlU2VsZWN0ZWRJZCA9IGlkO1xuXHRcdCQoc2VsZikudHJpZ2dlcihcIlNsaWRlQmFyOnNsaWRlU2VsZWN0ZWRcIiwgW2lkXSk7XG5cblx0fSk7XG5cblxuXHQkKHRoaXMub3B0aW9ucy5zbGlkZXNDb250YWluZXJJZCkuc2Nyb2xsVG9wKE1hdGgubWF4KDAsICQodGhpcy5vcHRpb25zLnNsaWRlTGlzdElkKS5oZWlnaHQoKSAtXG5cdFx0JCh0aGlzLm9wdGlvbnMuc2xpZGVMaXN0SWQpLnBhcmVudCgpLmhlaWdodCgpKSk7XG5cblx0aWYgKHNob3VsZENsaWNrKSB7XG5cblx0XHRzbGlkZS5jbGlja2VkKCk7XG5cblx0fVxuXG59O1xuXG5TbGlkZUJhci5wcm90b3R5cGUuYWRkU2xpZGVzID0gZnVuY3Rpb24gKHNsaWRlcykge1xuXG5cdGZvciAobGV0IGkgPSAwLCBsZW4gPSBzbGlkZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcblxuXHRcdHRoaXMuYWRkU2xpZGUoaSA9PT0gKGxlbiAtIDEpKTtcblx0XHQkKGAke3RoaXMub3B0aW9ucy5zbGlkZUxpc3RJZH0gbGk6bnRoLWNoaWxkKCR7aSArIDF9KT4uc2xpZGUtdGl0bGVgKS5odG1sKHNsaWRlc1tpXS50aXRvbCk7XG5cblx0fVxuXG59O1xuXG5TbGlkZUJhci5wcm90b3R5cGUucmVtb3ZlU2xpZGUgPSBmdW5jdGlvbiAoaWQpIHtcblxuXHQkKGAke3RoaXMub3B0aW9ucy5zbGlkZUxpc3RJZH0gbGk6bnRoLWNoaWxkKCR7aWQgKyAxfSlgKS5yZW1vdmUoKTtcblxufTtcblxuU2xpZGVCYXIucHJvdG90eXBlLnNldFNsaWRlVGl0bGUgPSBmdW5jdGlvbiAodGV4dCkge1xuXG5cdCQoYCR7dGhpcy5vcHRpb25zLnNsaWRlTGlzdElkfSBsaS5zZWxlY3RlZD4uc2xpZGUtdGl0bGVgKS5odG1sKHRleHQpO1xuXG59O1xuXG5TbGlkZUJhci5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG5cblx0JChgJHt0aGlzLm9wdGlvbnMuc2xpZGVMaXN0SWR9YCkuaHRtbChcIlwiKTtcblxufTtcbiIsIi8qIGdsb2JhbCAkLCBfKi9cblxuZnVuY3Rpb24gU2xpZGVJY29uKG9wdGlvbnMpIHtcblxuXHRjb25zdCBfZGVmYXVsdE9wdGlvbnMgPSB7XG5cblx0XHR0ZXh0OiBcIlwiLFxuXHRcdHRlbXBsYXRlSWQ6IFwiI3N0b3J5bWFwX3NsaWRlX3RlbXBsYXRlXCIsXG5cdFx0c2xpZGVDbGFzczogXCIuc2xpZGVcIixcblxuXHR9O1xuXG5cdHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBfZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuXG5cdHRoaXMudGVtcGxhdGUgPSBfLnRlbXBsYXRlKCQodGhpcy5vcHRpb25zLnRlbXBsYXRlSWQpLmh0bWwoKS50cmltKCkpO1xuXHR0aGlzLnNsaWRlRE9NRWxlbSA9ICQodGhpcy50ZW1wbGF0ZSh0aGlzLm9wdGlvbnMpKTtcblx0dGhpcy5kZWxldGVET01FbGVtID0gJChcIjxhIGNsYXNzPVxcXCJjbG9zZVxcXCIgaHJlZj1cXFwiamF2YXNjcmlwdDpcXFwiPiZuYnNwOzwvYT5cIik7XG5cblx0dGhpcy5hZGRFdmVudHMoKTtcblxufVxuXG5TbGlkZUljb24ucHJvdG90eXBlLmFkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuXHRjb25zdCBzZWxmID0gdGhpcztcblxuXHRzZWxmLnNsaWRlRE9NRWxlbS5jbGljaygoKSA9PiB7XG5cblx0XHRzZWxmLmNsaWNrZWQoKTtcblxuXHR9KTtcblxuXHRzZWxmLmRlbGV0ZURPTUVsZW0uY2xpY2soKCkgPT4ge1xuXG5cdFx0c2VsZi5kZWxldGVCdXR0b25QcmVzc2VkKCk7XG5cblx0fSk7XG5cbn07XG5cblNsaWRlSWNvbi5wcm90b3R5cGUuY2xpY2tlZCA9IGZ1bmN0aW9uICgpIHtcblxuXHRjb25zdCBzZWxmID0gdGhpcztcblxuXHRjb25zdCBjdXJyZW50U2xpZGVJbmRleCA9ICQoc2VsZi5vcHRpb25zLnNsaWRlQ2xhc3MpLmluZGV4KHNlbGYuc2xpZGVET01FbGVtKTtcblx0JChcIjpmb2N1c1wiKS5ibHVyKCk7IC8vIGZvcmNlIGNoYW5nZSBldmVudCFcblxuXHQkKGAke3RoaXMub3B0aW9ucy5zbGlkZUNsYXNzfS5zZWxlY3RlZGApLnJlbW92ZUNsYXNzKFwic2VsZWN0ZWRcIik7XG5cdCQoc2VsZi5zbGlkZURPTUVsZW0pLmFkZENsYXNzKFwic2VsZWN0ZWRcIik7XG5cblx0JChzZWxmKS50cmlnZ2VyKFwiU2xpZGU6c2VsZWN0ZWRcIiwgW2N1cnJlbnRTbGlkZUluZGV4XSk7XG5cblx0cmV0dXJuIGZhbHNlO1xuXG59O1xuXG5TbGlkZUljb24ucHJvdG90eXBlLmRlbGV0ZUJ1dHRvblByZXNzZWQgPSBmdW5jdGlvbiAoKSB7XG5cblx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cblx0Y29uc3QgY3VycmVudFNsaWRlSW5kZXggPSAkKHNlbGYub3B0aW9ucy5zbGlkZUNsYXNzKS5pbmRleChzZWxmLnNsaWRlRE9NRWxlbSk7XG5cdCQoc2VsZikudHJpZ2dlcihcIlNsaWRlOmRlbGV0ZVByZXNzZWRcIiwgW2N1cnJlbnRTbGlkZUluZGV4XSk7XG5cbn07XG5cblNsaWRlSWNvbi5wcm90b3R5cGUuYXBwZW5kVG8gPSBmdW5jdGlvbiAoaWQpIHtcblxuXHR0aGlzLnNsaWRlRE9NRWxlbS5hcHBlbmRUbyhpZCk7XG5cdHRoaXMuZGVsZXRlRE9NRWxlbS5hcHBlbmRUbyh0aGlzLnNsaWRlRE9NRWxlbSk7XG5cbn07XG4iLCIvKiBnbG9iYWwgVXRpbHMsICQqL1xuXG5mdW5jdGlvbiBTbGlkZUluZm8oaW5kZXgsIG9wdGlvbnMpIHtcblxuXHRjb25zdCBfZGVmYXVsdE9wdGlvbnMgPSB7XG5cblx0XHR1cmxJbnB1dElkOiBcIiN1cmxNYXBcIixcblx0XHR1cmxMb2FkQnV0dG9uSWQ6IFwiI3N0b3J5bWFwX2xvYWRcIixcblx0XHR1cmxDbGVhckJ1dHRvbklkOiBcIiNzdG9yeW1hcF91bmxvYWRcIixcblx0XHR1cmxGb3JtR3JvdXA6IFwiI3VybEZvcm1Hcm91cFwiLFxuXHRcdHVybEZlZWRiYWNrOiBcIiN1cmxNYXBGZWVkYmFja1wiLFxuXHRcdHRpdGxlSW5wdXRJZDogXCIjdGl0bGVcIixcblx0XHR0aXRsZUZvcm1Hcm91cDogXCIjdGl0bGVGb3JtR3JvdXBcIixcblx0XHR0aXRsZUZlZWRiYWNrOiBcIiN0aXRsZUZlZWRiYWNrXCIsXG5cdFx0aW5mb0J1dHRvbklkOiBcIiNvYnJpcl9tZW51XCIsXG5cdFx0c2F2ZVNsaWRlQnV0dG9uSWQ6IFwiI3N0b3J5bWFwX3NhdmVfc2xpZGVcIixcblx0XHRyZXNldFNsaWRlQnV0dG9uSWQ6IFwiI3N0b3J5bWFwX3Jlc2V0X3NsaWRlXCIsXG5cdFx0dGV4dElucHV0SWQ6IFwiI3N1bW1lcm5vdGVcIixcblx0XHRpRnJhbWVJZDogXCIjaW5zdGFtYXBzTWFwXCIsXG5cdFx0bm9VUkxJZDogXCIjbm9VUkxMb2FkZWRcIixcblx0XHRpRnJhbWVDb250YWluZXJJZDogXCIjbWFwYUZyYW1lXCIsXG5cdFx0ZGF0YUNvbnRhaW5lcklkOiBcIiNkYXRhU2VjdGlvblwiLFxuXHRcdHNwaW5uZXJJZDogXCIjc2F2ZVNsaWRlU3Bpbm5lclwiLFxuXHRcdGRlZmF1bHRVcmw6IFwiaHR0cHM6Ly93d3cuaW5zdGFtYXBzLmNhdC9nZW9jYXR3ZWIvdmlzb3IuaHRtbD9lbWJlZD0xXCIsXG5cblx0fTtcblxuXHR0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgX2RlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcblx0dGhpcy5pc0RpcnR5ID0gZmFsc2U7XG5cblx0dGhpcy5hZGRFdmVudHMoKTtcblx0dGhpcy5zZXR1cFN1bW1lcm5vdGUoKTtcblxuXHR0aGlzLnJlc2V0KCk7XG5cbn1cblxuU2xpZGVJbmZvLnByb3RvdHlwZS5hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cblx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cblx0JChzZWxmLm9wdGlvbnMudXJsTG9hZEJ1dHRvbklkKS5vbihcImNsaWNrXCIsICgpID0+IHtcblxuXHRcdHNlbGYuc2V0VVJMKCk7XG5cblx0fSk7XG5cblx0JChzZWxmLm9wdGlvbnMudXJsQ2xlYXJCdXR0b25JZCkub24oXCJjbGlja1wiLCAoKSA9PiB7XG5cblx0XHQkKHNlbGYub3B0aW9ucy51cmxJbnB1dElkKS52YWwoXCJcIik7XG5cdFx0JChzZWxmLm9wdGlvbnMuaUZyYW1lSWQpLmhpZGUoKTtcblx0XHQkKHNlbGYub3B0aW9ucy5ub1VSTElkKS5zaG93KCk7XG5cdFx0c2VsZi5kaXNhYmxlVVJMQnV0dG9ucyhmYWxzZSk7XG5cdFx0c2VsZi5kaXNhYmxlU2xpZGVJbnB1dHMoZmFsc2UpO1xuXG5cdH0pO1xuXG5cdCQoc2VsZi5vcHRpb25zLmluZm9CdXR0b25JZCkub24oXCJjbGlja1wiLCAoKSA9PiB7XG5cblx0XHRpZiAoJChzZWxmLm9wdGlvbnMuaUZyYW1lQ29udGFpbmVySWQpLmhhc0NsYXNzKFwiZXhwYW5kZWRcIikpIHtcblxuXHRcdFx0c2VsZi5vcGVuKCk7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRzZWxmLmNsb3NlKCk7XG5cblx0XHR9XG5cblx0fSk7XG5cblx0JChzZWxmLm9wdGlvbnMuc2F2ZVNsaWRlQnV0dG9uSWQpLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuXG5cdFx0c2VsZi5lbmFibGVTYXZpbmcoZmFsc2UpO1xuXHRcdCQoc2VsZi5vcHRpb25zLnNwaW5uZXJJZCkuc2hvdygpO1xuXHRcdHNlbGYuZGlzYWJsZVNsaWRlSW5wdXRzKCk7XG5cdFx0JChzZWxmKS50cmlnZ2VyKFwiU2xpZGVJbmZvOnNhdmVTbGlkZVByZXNzZWRcIik7XG5cblx0fSk7XG5cblx0JChzZWxmLm9wdGlvbnMucmVzZXRTbGlkZUJ1dHRvbklkKS5vbihcImNsaWNrXCIsICgpID0+IHtcblxuXHRcdHNlbGYucmVzZXQoZmFsc2UpO1xuXHRcdHNlbGYuc2V0RGlydHkodHJ1ZSk7XG5cblx0fSk7XG5cblx0JChzZWxmLm9wdGlvbnMudXJsSW5wdXRJZCkub24oXCJpbnB1dFwiLCAoKSA9PiB7XG5cblx0XHRzZWxmLmNoZWNrVVJMKCk7XG5cblx0fSk7XG5cblx0JChzZWxmLm9wdGlvbnMudGl0bGVJbnB1dElkKS5vbihcImlucHV0XCIsICgpID0+IHtcblxuXHRcdHNlbGYuY2hlY2tUaXRvbCgpO1xuXG5cdH0pO1xuXG5cdCQoc2VsZi5vcHRpb25zLnRleHRJbnB1dElkKS5vbihcInN1bW1lcm5vdGUuY2hhbmdlXCIsICgpID0+IHtcblxuXHRcdHNlbGYuY2hlY2tUZXh0KCk7XG5cblx0fSk7XG5cbn07XG5cblNsaWRlSW5mby5wcm90b3R5cGUuc2V0dXBTdW1tZXJub3RlID0gZnVuY3Rpb24gKCkge1xuXG5cdCQodGhpcy5vcHRpb25zLnRleHRJbnB1dElkKS5zdW1tZXJub3RlKHsgZGlzYWJsZURyYWdBbmREcm9wOiB0cnVlLFxuXHRcdHRvb2xiYXI6IFtcblx0XHRcdFtcInN0eWxlXCIsIFtcImNvbG9yXCJdXSxcblx0XHRcdFtcInN0eWxlXCIsIFtcInN0eWxlXCJdXSxcblx0XHRcdFtcInN0eWxlXCIsIFtcImJvbGRcIiwgXCJ1bmRlcmxpbmVcIiwgXCJjbGVhclwiXV0sXG5cdFx0XHRbXCJzdHlsZVwiLCBbXCJmb250bmFtZVwiXV0sXG5cdFx0XHRbXCJwYXJhXCIsIFtcInVsXCIsIFwib2xcIiwgXCJwYXJhZ3JhcGhcIl1dLFxuXHRcdFx0W1wiaW5zZXJ0XCIsIFtcInRhYmxlXCJdXSxcblx0XHRcdFtcImluc2VydFwiLCBbXCJsaW5rXCIsIFwicGljdHVyZVwiLCBcInZpZGVvXCJdXSxcblx0XHRcdFtcIm1pc2NcIiwgW1wiZnVsbHNjcmVlblwiLCBcImNvZGV2aWV3XCIsIFwiaGVscFwiXV0sXG5cdFx0XSxcblx0fSk7XG5cblx0Ly8gSGlkZSB0aGUgXCJVcGxvYWQgcGljdHVyZVwiIGZvcm0gXG5cdCQoXCIubm90ZS1ncm91cC1zZWxlY3QtZnJvbS1maWxlc1wiKS5oaWRlKCk7XG5cbn07XG5cblNsaWRlSW5mby5wcm90b3R5cGUuY2hlY2tVUkwgPSBmdW5jdGlvbiAoKSB7XG5cblx0Y29uc3QgdXJsID0gJCh0aGlzLm9wdGlvbnMudXJsSW5wdXRJZCkudmFsKCk7XG5cblx0aWYgKFV0aWxzLmlzVmFsaWRVUkwodXJsKSkge1xuXG5cdFx0dGhpcy5lbmFibGVVUkxCdXR0b25zKCk7XG5cdFx0dGhpcy5zZXREaXJ0eSh0cnVlKTtcblxuXHR9IGVsc2Uge1xuXG5cdFx0dGhpcy5kaXNhYmxlVVJMQnV0dG9ucygpO1xuXHRcdHRoaXMuZGlzYWJsZVNsaWRlSW5wdXRzKGZhbHNlKTtcblxuXHR9XG5cbn07XG5cblNsaWRlSW5mby5wcm90b3R5cGUuZW5hYmxlVVJMQnV0dG9ucyA9IGZ1bmN0aW9uICgpIHtcblxuXHQkKHRoaXMub3B0aW9ucy51cmxGb3JtR3JvdXApLnJlbW92ZUNsYXNzKFwiaGFzLWVycm9yXCIpO1xuXHQkKHRoaXMub3B0aW9ucy51cmxGZWVkYmFjaykuaGlkZSgpO1xuXHQkKHRoaXMub3B0aW9ucy51cmxMb2FkQnV0dG9uSWQpLnByb3AoXCJkaXNhYmxlZFwiLCBmYWxzZSk7XG5cdCQodGhpcy5vcHRpb25zLnVybENsZWFyQnV0dG9uSWQpLnByb3AoXCJkaXNhYmxlZFwiLCBmYWxzZSk7XG5cbn07XG5cblNsaWRlSW5mby5wcm90b3R5cGUuZW5hYmxlU2xpZGVJbnB1dHMgPSBmdW5jdGlvbiAoKSB7XG5cblx0JCh0aGlzLm9wdGlvbnMudGl0bGVGb3JtR3JvdXApLnJlbW92ZUNsYXNzKFwiaGFzLWVycm9yXCIpO1xuXHQkKHRoaXMub3B0aW9ucy50aXRsZUZlZWRiYWNrKS5oaWRlKCk7XG5cdCQodGhpcy5vcHRpb25zLnRleHRJbnB1dElkKS5zdW1tZXJub3RlKFwiZW5hYmxlXCIpO1xuXHQkKHRoaXMub3B0aW9ucy50aXRsZUlucHV0SWQpLnByb3AoXCJkaXNhYmxlZFwiLCBmYWxzZSk7XG5cdCQodGhpcy5vcHRpb25zLnJlc2V0U2xpZGVCdXR0b25JZCkucHJvcChcImRpc2FibGVkXCIsIGZhbHNlKTtcblx0JCh0aGlzLm9wdGlvbnMuc2F2ZVNsaWRlQnV0dG9uSWQpLnByb3AoXCJkaXNhYmxlZFwiLCBmYWxzZSk7XG5cbn07XG5cblNsaWRlSW5mby5wcm90b3R5cGUuZGlzYWJsZVVSTEJ1dHRvbnMgPSBmdW5jdGlvbiAoc2hvd0ZlZWRiYWNrKSB7XG5cblx0Y29uc3Qgc2hvdWxkU2hvd0ZlZWRiYWNrID0gc2hvd0ZlZWRiYWNrIHx8IChzaG93RmVlZGJhY2sgPT09IHVuZGVmaW5lZCk7XG5cblx0aWYgKHNob3VsZFNob3dGZWVkYmFjaykge1xuXG5cdFx0JCh0aGlzLm9wdGlvbnMudXJsRm9ybUdyb3VwKS5hZGRDbGFzcyhcImhhcy1lcnJvclwiKTtcblx0XHQkKHRoaXMub3B0aW9ucy51cmxGZWVkYmFjaykuc2hvdygpO1xuXG5cdH1cblxuXHQkKHRoaXMub3B0aW9ucy51cmxMb2FkQnV0dG9uSWQpLnByb3AoXCJkaXNhYmxlZFwiLCB0cnVlKTtcblx0JCh0aGlzLm9wdGlvbnMudXJsQ2xlYXJCdXR0b25JZCkucHJvcChcImRpc2FibGVkXCIsIHRydWUpO1xuXG59O1xuXG5TbGlkZUluZm8ucHJvdG90eXBlLmRpc2FibGVTbGlkZUlucHV0cyA9IGZ1bmN0aW9uIChzaG93RmVlZGJhY2spIHtcblxuXHRjb25zdCBzaG91bGRTaG93RmVlZGJhY2sgPSBzaG93RmVlZGJhY2sgfHwgKHNob3dGZWVkYmFjayA9PT0gdW5kZWZpbmVkKTtcblxuXHRpZiAoc2hvdWxkU2hvd0ZlZWRiYWNrKSB7XG5cblx0XHQkKHRoaXMub3B0aW9ucy50aXRsZUZvcm1Hcm91cCkuYWRkQ2xhc3MoXCJoYXMtZXJyb3JcIik7XG5cdFx0JCh0aGlzLm9wdGlvbnMudGl0bGVGZWVkYmFjaykuc2hvdygpO1xuXG5cdH1cblxuXHQkKHRoaXMub3B0aW9ucy50ZXh0SW5wdXRJZCkuc3VtbWVybm90ZShcImRpc2FibGVcIik7XG5cdCQodGhpcy5vcHRpb25zLnJlc2V0U2xpZGVCdXR0b25JZCkucHJvcChcImRpc2FibGVkXCIsIHRydWUpO1xuXHQkKHRoaXMub3B0aW9ucy5zYXZlU2xpZGVCdXR0b25JZCkucHJvcChcImRpc2FibGVkXCIsIHRydWUpO1xuXHQkKHRoaXMub3B0aW9ucy50aXRsZUlucHV0SWQpLnByb3AoXCJkaXNhYmxlZFwiLCB0cnVlKTtcblxufTtcblxuU2xpZGVJbmZvLnByb3RvdHlwZS5jaGVja1RpdG9sID0gZnVuY3Rpb24gKCkge1xuXG5cdGNvbnN0IHRleHQgPSAkKHRoaXMub3B0aW9ucy50aXRsZUlucHV0SWQpLnZhbCgpO1xuXG5cdGlmIChVdGlscy5pc05vdEVtcHR5KHRleHQpKSB7XG5cblx0XHR0aGlzLnNldERpcnR5KHRydWUpO1xuXG5cdH1cblxufTtcblxuU2xpZGVJbmZvLnByb3RvdHlwZS5jaGVja1RleHQgPSBmdW5jdGlvbiAoKSB7XG5cblx0Y29uc3QgdGV4dCA9ICQodGhpcy5vcHRpb25zLnRleHRJbnB1dElkKS5zdW1tZXJub3RlKFwiY29kZVwiKTtcblxuXHRpZiAoVXRpbHMuaXNOb3RFbXB0eSh0ZXh0KSkge1xuXG5cdFx0dGhpcy5zZXREaXJ0eSh0cnVlKTtcblxuXHR9XG5cbn07XG5cblNsaWRlSW5mby5wcm90b3R5cGUuc2V0RGlydHkgPSBmdW5jdGlvbiAoaXNEaXJ0eSkge1xuXG5cdHRoaXMuaXNEaXJ0eSA9IGlzRGlydHk7XG5cdHRoaXMuZW5hYmxlU2F2aW5nKGlzRGlydHkpO1xuXG59O1xuXG5TbGlkZUluZm8ucHJvdG90eXBlLnNldFVSTCA9IGZ1bmN0aW9uICgpIHtcblxuXHRjb25zdCBzZWxmID0gdGhpcztcblxuXHRjb25zdCB1cmwgPSAkKHNlbGYub3B0aW9ucy51cmxJbnB1dElkKS52YWwoKTtcblx0JChzZWxmLm9wdGlvbnMuaUZyYW1lSWQpLmF0dHIoXCJzcmNcIiwgdXJsKTtcblx0JCh0aGlzLm9wdGlvbnMubm9VUkxJZCkuaGlkZSgpO1xuXHQkKHRoaXMub3B0aW9ucy5pRnJhbWVJZCkuc2hvdygpO1xuXHRzZWxmLmVuYWJsZVNsaWRlSW5wdXRzKCk7XG5cbn07XG5cblNsaWRlSW5mby5wcm90b3R5cGUuZ2V0VVJMID0gZnVuY3Rpb24gKCkge1xuXG5cdHJldHVybiAkKHRoaXMub3B0aW9ucy51cmxJbnB1dElkKS52YWwoKTtcblxufTtcblxuU2xpZGVJbmZvLnByb3RvdHlwZS5nZXRUaXRvbCA9IGZ1bmN0aW9uICgpIHtcblxuXHRyZXR1cm4gJCh0aGlzLm9wdGlvbnMudGl0bGVJbnB1dElkKS52YWwoKTtcblxufTtcblxuU2xpZGVJbmZvLnByb3RvdHlwZS5nZXREZXNjcmlwY2lvID0gZnVuY3Rpb24gKCkge1xuXG5cdHJldHVybiAkKHRoaXMub3B0aW9ucy50ZXh0SW5wdXRJZCkuc3VtbWVybm90ZShcImNvZGVcIik7XG5cbn07XG5cblNsaWRlSW5mby5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoZGVsZXRlVVJMKSB7XG5cblx0Y29uc3Qgc2hvdWxkRGVsZXRlVVJMID0gZGVsZXRlVVJMIHx8IChkZWxldGVVUkwgPT09IHVuZGVmaW5lZCk7XG5cblx0JCh0aGlzLm9wdGlvbnMudGl0bGVJbnB1dElkKS52YWwoXCJcIik7XG5cdCQodGhpcy5vcHRpb25zLnRleHRJbnB1dElkKS5zdW1tZXJub3RlKFwiY29kZVwiLCBcIlwiKTtcblx0JCh0aGlzLm9wdGlvbnMudGl0bGVGb3JtR3JvdXApLnJlbW92ZUNsYXNzKFwiaGFzLWVycm9yXCIpO1xuXHQkKHRoaXMub3B0aW9ucy50aXRsZUZlZWRiYWNrKS5oaWRlKCk7XG5cblx0aWYgKHNob3VsZERlbGV0ZVVSTCkge1xuXG5cdFx0JCh0aGlzLm9wdGlvbnMudXJsSW5wdXRJZCkudmFsKFwiXCIpO1xuXHRcdCQodGhpcy5vcHRpb25zLmlGcmFtZUlkKS5oaWRlKCk7XG5cdFx0JCh0aGlzLm9wdGlvbnMubm9VUkxJZCkuc2hvdygpO1xuXHRcdCQodGhpcy5vcHRpb25zLnRleHRJbnB1dElkKS5zdW1tZXJub3RlKFwiZGlzYWJsZVwiKTtcblxuXHR9XG5cbn07XG5cblNsaWRlSW5mby5wcm90b3R5cGUuc2V0RGF0YSA9IGZ1bmN0aW9uICh1cmwsIHRpdG9sLCBkZXNjcmlwY2lvKSB7XG5cblx0aWYgKHVybCAmJiB1cmwgIT09IFwiXCIpIHtcblxuXHRcdCQodGhpcy5vcHRpb25zLmlGcmFtZUlkKS5hdHRyKFwic3JjXCIsIHVybCk7XG5cdFx0JCh0aGlzLm9wdGlvbnMubm9VUkxJZCkuaGlkZSgpO1xuXHRcdCQodGhpcy5vcHRpb25zLmlGcmFtZUlkKS5zaG93KCk7XG5cdFx0dGhpcy5lbmFibGVTbGlkZUlucHV0cygpO1xuXHRcdHRoaXMuZW5hYmxlVVJMQnV0dG9ucygpO1xuXG5cdH0gZWxzZSB7XG5cblx0XHQkKHRoaXMub3B0aW9ucy5pRnJhbWVJZCkuaGlkZSgpO1xuXHRcdCQodGhpcy5vcHRpb25zLm5vVVJMSWQpLnNob3coKTtcblx0XHR0aGlzLmRpc2FibGVTbGlkZUlucHV0cygpO1xuXHRcdHRoaXMuZGlzYWJsZVVSTEJ1dHRvbnMoKTtcblxuXHR9XG5cblx0JCh0aGlzLm9wdGlvbnMudXJsSW5wdXRJZCkudmFsKHVybCk7XG5cdCQodGhpcy5vcHRpb25zLnRpdGxlSW5wdXRJZCkudmFsKHRpdG9sKTtcblx0JCh0aGlzLm9wdGlvbnMudGV4dElucHV0SWQpLnN1bW1lcm5vdGUoXCJjb2RlXCIsIGRlc2NyaXBjaW8pO1xuXG59O1xuXG5TbGlkZUluZm8ucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuXG5cdCQodGhpcy5vcHRpb25zLmlGcmFtZUNvbnRhaW5lcklkKS5yZW1vdmVDbGFzcyhcImNvbGxhcHNlZFwiKTtcblx0JCh0aGlzLm9wdGlvbnMuaUZyYW1lQ29udGFpbmVySWQpLmFkZENsYXNzKFwiZXhwYW5kZWRcIik7XG5cdCQodGhpcy5vcHRpb25zLmRhdGFDb250YWluZXJJZCkuaGlkZSgpO1xuXG59O1xuXG5TbGlkZUluZm8ucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XG5cblx0JCh0aGlzLm9wdGlvbnMuaUZyYW1lQ29udGFpbmVySWQpLnJlbW92ZUNsYXNzKFwiZXhwYW5kZWRcIik7XG5cdCQodGhpcy5vcHRpb25zLmlGcmFtZUNvbnRhaW5lcklkKS5hZGRDbGFzcyhcImNvbGxhcHNlZFwiKTtcblx0JCh0aGlzLm9wdGlvbnMuZGF0YUNvbnRhaW5lcklkKS5zaG93KCk7XG5cbn07XG5cblNsaWRlSW5mby5wcm90b3R5cGUuZW5hYmxlU2F2aW5nID0gZnVuY3Rpb24gKHNob3VsZEVuYWJsZSkge1xuXG5cdCQodGhpcy5vcHRpb25zLnNhdmVTbGlkZUJ1dHRvbklkKS5wcm9wKFwiZGlzYWJsZWRcIiwgIXNob3VsZEVuYWJsZSk7XG5cbn07XG5cblNsaWRlSW5mby5wcm90b3R5cGUuc2F2ZWQgPSBmdW5jdGlvbiAoKSB7XG5cblx0dGhpcy5lbmFibGVTbGlkZUlucHV0cygpO1xuXHR0aGlzLnNldERpcnR5KGZhbHNlKTtcblx0JCh0aGlzLm9wdGlvbnMuc3Bpbm5lcklkKS5oaWRlKCk7XG5cbn07XG4iLCIvKiBnbG9iYWwgJCwgU2xpZGVCYXIsIFNsaWRlSW5mbywgU3RvcnlNYXBTZXJ2ZXIsIERpYWxvZyovXG5cbmZ1bmN0aW9uIFN0b3J5TWFwKG9wdGlvbnMpIHtcblxuXHRjb25zdCBfZGVmYXVsdE9wdGlvbnMgPSB7XG5cblx0XHRsYW5ndWFnZTogXCJlblwiLFxuXHRcdG1heFNsaWRlczogMTAsXG5cdFx0c3RyaW5nczoge1xuXHRcdFx0ZW46IHtcblx0XHRcdFx0bWF4U2xpZGVzOiBcIk1heGltdW0gbnVtYmVyIG9mIHNsaWRlcyByZWFjaGVkXCIsXG5cdFx0XHRcdHB1Ymxpc2g6IFwiPGI+VG8gZWRpdCBnbyB0bzo8L2I+IDxhIHRhcmdldD0nX2JsYW5rJyBocmVmPSc8PGVkaXQ+Pic+PDxlZGl0Pj48L2E+IDxicj48YnI+PGI+VG8gdmlldyBnbyB0bzo8L2I+IDxhIHRhcmdldD0nX2JsYW5rJyBocmVmPSc8PHZpZXc+Pic+PDx2aWV3Pj48L2E+XCIsXG5cdFx0XHRcdGRlbGV0ZTogXCJEZWxldGUgXFxcIjw8bmFtZT4+XFxcIiBzbGlkZT9cIixcblx0XHRcdH0sXG5cdFx0XHRjYToge1xuXHRcdFx0XHRtYXhTbGlkZXM6IFwiTcOgeGltIG7Dum1lcm8gZGUgc2xpZGVzIGFzc29saXRcIixcblx0XHRcdFx0cHVibGlzaDogXCI8Yj5QZXIgZWRpdGFyIHbDqXMgYTo8L2I+IDxhIHRhcmdldD0nX2JsYW5rJyBocmVmPSc8PGVkaXQ+Pic+PDxlZGl0Pj48L2E+IDxicj48YnI+PGI+UGVyIHZldXJlIHbDqXMgYTo8L2I+IDxhIHRhcmdldD0nX2JsYW5rJyBocmVmPSc8PHZpZXc+Pic+PDx2aWV3Pj48L2E+XCIsXG5cdFx0XHRcdGRlbGV0ZTogXCJFbGltaW5hIGxhIGRpYXBvc2l0aXZhIFxcXCI8PG5hbWU+PlxcXCI/XCIsXG5cdFx0XHR9LFxuXHRcdFx0ZXM6IHtcblx0XHRcdFx0bWF4U2xpZGVzOiBcIkhhcyBsbGVnYWRvIGFsIG7Dum1lcm8gbcOheGltbyBkZSBzbGlkZXNcIixcblx0XHRcdFx0cHVibGlzaDogXCI8Yj5QYXJhIGVkaXRhciB2ZSBhOjwvYj4gPGEgdGFyZ2V0PSdfYmxhbmsnIGhyZWY9Jzw8ZWRpdD4+Jz48PGVkaXQ+PjwvYT4gPGJyPjxicj48Yj5QYXJhIHZlciB2ZSBhOjwvYj4gPGEgdGFyZ2V0PSdfYmxhbmsnIGhyZWY9Jzw8dmlldz4+Jz48PHZpZXc+PjwvYT5cIixcblx0XHRcdFx0ZGVsZXRlOiBcIkVsaW1pbmEgbGEgZGlhcG9zaXRpdmEgXFxcIjw8bmFtZT4+XFxcIj9cIixcblx0XHRcdH0sXG5cdFx0fSxcblx0XHRlZGl0b3JVUkw6IFwiaHR0cHM6Ly93d3cuaW5zdGFtYXBzLmNhdC9zdG9yeW1hcC9lZGl0b3IuaHRtbFwiLFxuXHRcdHZpZXdlclVSTDogXCJodHRwczovL3d3dy5pbnN0YW1hcHMuY2F0L3N0b3J5bWFwL3Zpc29yLmh0bWxcIixcblxuXHR9O1xuXG5cdHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBfZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuXG5cdHRoaXMuaXNEaXJ0eSA9IGZhbHNlO1xuXHR0aGlzLmN1cnJlbnREZWxldGlvbkluZGV4ID0gLTE7XG5cdHRoaXMuY3VycmVudFNlbGVjdGVkSW5kZXggPSAtMTtcblx0dGhpcy5zbGlkZXMgPSBbXTtcblx0dGhpcy5pZEVkaXRvciA9IFwiXCI7XG5cdHRoaXMuaWRTdG9yeU1hcCA9IFwiXCI7XG5cdHRoaXMuc2xpZGVCYXIgPSBuZXcgU2xpZGVCYXIoKTtcblx0dGhpcy5zbGlkZUluZm9QYW5lbCA9IG5ldyBTbGlkZUluZm8oKTtcblx0dGhpcy5kZWxldGVEaWFsb2cgPSBuZXcgRGlhbG9nKCk7XG5cdHRoaXMubWF4U2xpZGVzRGlhbG9nID0gbmV3IERpYWxvZyh7IHNob3dDYW5jZWxCdXR0b246IGZhbHNlIH0pO1xuXHR0aGlzLm1heFNsaWRlc0RpYWxvZy5zZXRNZXNzYWdlKHRoaXMub3B0aW9ucy5zdHJpbmdzW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0ubWF4U2xpZGVzKTtcblx0dGhpcy5wdWJsaXNoRGlhbG9nID0gbmV3IERpYWxvZyh7IHNob3dDYW5jZWxCdXR0b246IGZhbHNlIH0pO1xuXHR0aGlzLnNlcnZlciA9IG5ldyBTdG9yeU1hcFNlcnZlcigpO1xuXG5cdHRoaXMuYWRkRXZlbnRzKCk7XG5cdHRoaXMuX2FkZFNsaWRlKCk7XG5cbn1cblxuU3RvcnlNYXAucHJvdG90eXBlLmFkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuXHRjb25zdCBzZWxmID0gdGhpcztcblxuXHQkKHNlbGYuc2xpZGVJbmZvUGFuZWwpLm9uKFwiU2xpZGVJbmZvOnNhdmVTbGlkZVByZXNzZWRcIiwgKCkgPT4ge1xuXG5cdFx0c2VsZi5zYXZlU2xpZGUoKTtcblxuXHR9KTtcblxuXHQkKHNlbGYuc2xpZGVCYXIpLm9uKFwiU2xpZGVCYXI6c2xpZGVTZWxlY3RlZFwiLCAoZXZlbnQsIGlkKSA9PiB7XG5cblx0XHRzZWxmLl9zbGlkZVNlbGVjdGVkKGlkKTtcblxuXHR9KTtcblxuXHQkKHNlbGYuc2xpZGVCYXIpLm9uKFwiU2xpZGVCYXI6YWRkU2xpZGVQcmVzc2VkXCIsICgpID0+IHtcblxuXHRcdHNlbGYuX2FkZFNsaWRlKCk7XG5cblx0fSk7XG5cblx0JChzZWxmLnNsaWRlQmFyKS5vbihcIlNsaWRlQmFyOmRlbGV0ZVNsaWRlUHJlc3NlZFwiLCAoZXZlbnQsIGlkKSA9PiB7XG5cblx0XHRzZWxmLmN1cnJlbnREZWxldGlvbkluZGV4ID0gaWQ7XG5cdFx0c2VsZi5fc2xpZGVEZWxldGVQcmVzc2VkKGlkKTtcblxuXHR9KTtcblxuXHQkKHNlbGYuZGVsZXRlRGlhbG9nKS5vbihcIkRpYWxvZzphY2NlcHRcIiwgKCkgPT4ge1xuXG5cdFx0c2VsZi5fc2xpZGVEZWxldGVDb25maXJtZWQoKTtcblxuXHRcdGlmICh0aGlzLmN1cnJlbnRTZWxlY3RlZEluZGV4ID09PSB0aGlzLmN1cnJlbnREZWxldGlvbkluZGV4KSB7XG5cblx0XHRcdHRoaXMuc2xpZGVJbmZvUGFuZWwuY2xlYXIoKTtcblxuXHRcdH1cblxuXHRcdHNlbGYuY3VycmVudERlbGV0aW9uSW5kZXggPSAtMTtcblxuXHR9KTtcblxuXHQkKHNlbGYuZGVsZXRlRGlhbG9nKS5vbihcIkRpYWxvZzpjYW5jZWxcIiwgKCkgPT4ge1xuXG5cdFx0c2VsZi5jdXJyZW50RGVsZXRpb25JbmRleCA9IC0xO1xuXG5cdH0pO1xuXG59O1xuXG5TdG9yeU1hcC5wcm90b3R5cGUuc2F2ZVNsaWRlID0gZnVuY3Rpb24gKCkge1xuXG5cdC8vIEFnYWZhciBsZXMgZGFkZXMgZGUgbCdzbGlkZUluZm9QYW5lbCBpIGd1YXJkYXItbGVzIGEgbCdvYmplY3RlIGRlIGwnc2xpZGVcblx0Y29uc3Qgc2xpZGUgPSB0aGlzLmNyZWF0ZVNsaWRlRGF0YSh0aGlzLnNsaWRlcy5sZW5ndGgsIHRoaXMuc2xpZGVJbmZvUGFuZWwuZ2V0VVJMKCksXG5cdFx0dGhpcy5zbGlkZUluZm9QYW5lbC5nZXRUaXRvbCgpLCB0aGlzLnNsaWRlSW5mb1BhbmVsLmdldERlc2NyaXBjaW8oKSk7XG5cblx0dGhpcy5zbGlkZUJhci5zZXRTbGlkZVRpdGxlKHNsaWRlLnRpdG9sKTtcblx0dGhpcy5zbGlkZXNbdGhpcy5jdXJyZW50U2VsZWN0ZWRJbmRleF0gPSBzbGlkZTtcblx0dGhpcy5pc0RpcnR5ID0gdHJ1ZTtcblxuXHQvLyBHdWFyZGVtIGxlcyBkYWRlcyBhbCBzZXJ2aWRvclxuXHR0aGlzLnNhdmUoKS50aGVuKCgpID0+IHtcblxuXHRcdHRoaXMuc2xpZGVJbmZvUGFuZWwuc2F2ZWQoKTtcblxuXHR9KTtcblxufTtcblxuU3RvcnlNYXAucHJvdG90eXBlLmNyZWF0ZVNsaWRlRGF0YSA9IGZ1bmN0aW9uIChpZCwgdXJsLCB0aXRvbCwgZGVzY3JpcGNpbykge1xuXG5cdGNvbnN0IHNsaWRlSWQgPSBpZCB8fCAtMTtcblx0Y29uc3Qgc2xpZGVVUkwgPSB1cmwgfHwgXCJcIjtcblx0Y29uc3Qgc2xpZGVUaXRvbCA9IHRpdG9sIHx8IFwiXCI7XG5cdGNvbnN0IHNsaWRlRGVzYyA9IGRlc2NyaXBjaW8gfHwgXCJcIjtcblxuXHRjb25zdCBkYXRhID0ge1xuXHRcdGlkOiBzbGlkZUlkLFxuXHRcdHVybF9tYXBhOiBzbGlkZVVSTCxcblx0XHR0aXRvbDogc2xpZGVUaXRvbCxcblx0XHRkZXNjcmlwY2lvOiBzbGlkZURlc2MsXG5cdH07XG5cblx0cmV0dXJuIGRhdGE7XG5cbn07XG5cblN0b3J5TWFwLnByb3RvdHlwZS5fYWRkU2xpZGUgPSBmdW5jdGlvbiAoKSB7XG5cblx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cblx0Y29uc3QgbiA9IHNlbGYuc2xpZGVzLmxlbmd0aDtcblx0aWYgKG4gPT09IHNlbGYub3B0aW9ucy5tYXhTbGlkZXMpIHtcblxuXHRcdHNlbGYubWF4U2xpZGVzRGlhbG9nLnNob3coKTtcblxuXHR9XHRlbHNlIHtcblxuXHRcdGNvbnN0IHNsaWRlID0gc2VsZi5jcmVhdGVTbGlkZURhdGEobik7XG5cdFx0c2VsZi5zbGlkZXMucHVzaChzbGlkZSk7XG5cdFx0dGhpcy5zbGlkZUJhci5hZGRTbGlkZSgpO1xuXHRcdCQoc2VsZikudHJpZ2dlcihcIlN0b3J5TWFwOmNoYW5nZWRcIik7XG5cblx0fVxuXG59O1xuXG5TdG9yeU1hcC5wcm90b3R5cGUuX3NsaWRlU2VsZWN0ZWQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcblxuXHRpZiAodGhpcy5zbGlkZXMgIT0gbnVsbCkge1xuXG5cdFx0dGhpcy5jdXJyZW50U2VsZWN0ZWRJbmRleCA9IGluZGV4O1xuXHRcdGNvbnN0IGN1cnJlbnRTbGlkZSA9IHRoaXMuc2xpZGVzW2luZGV4XTtcblx0XHR0aGlzLnNsaWRlSW5mb1BhbmVsLnNldERhdGEoY3VycmVudFNsaWRlLnVybF9tYXBhLCBjdXJyZW50U2xpZGUudGl0b2wsIGN1cnJlbnRTbGlkZS5kZXNjcmlwY2lvKTtcblx0XHR0aGlzLnNsaWRlSW5mb1BhbmVsLm9wZW4oKTtcblxuXHR9XG5cbn07XG5cblN0b3J5TWFwLnByb3RvdHlwZS5fc2xpZGVEZWxldGVQcmVzc2VkID0gZnVuY3Rpb24gKGluZGV4KSB7XG5cblx0Y29uc3QgZGF0YSA9IHRoaXMuc2xpZGVzW2luZGV4XTtcblx0Y29uc3Qgc2xpZGVUaXRsZSA9IChkYXRhLnRpdG9sIHx8IFwiKHVudGl0bGVkKVwiKTtcblxuXHR0aGlzLmRlbGV0ZURpYWxvZy5zZXRNZXNzYWdlKHRoaXMub3B0aW9ucy5zdHJpbmdzW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0uZGVsZXRlXG5cdFx0LnJlcGxhY2UoXCI8PG5hbWU+PlwiLCBzbGlkZVRpdGxlKSk7XG5cdHRoaXMuZGVsZXRlRGlhbG9nLnNob3coKTtcblxufTtcblxuU3RvcnlNYXAucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG5cblx0Y29uc3QgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG5cblx0aWYgKCF0aGlzLmlzRGlydHkpIHtcblxuXHRcdGRlZmVycmVkLnJlc29sdmUoKTtcblxuXHR9IGVsc2UgaWYgKHRoaXMuaWRTdG9yeU1hcCAhPT0gXCJcIikge1xuXG5cdFx0aWYgKHRoaXMuaWRFZGl0b3IgPT09IFwiXCIpIHtcblxuXHRcdFx0Ly8gamEgZXhpc3RlaXggbCdzdG9yeW1hcCBjcmVhdC4gRW50cmVtIGVuIG1vZGUgZWRpY2nDs1xuXHRcdFx0dGhpcy5zZXJ2ZXIuZWRpdE1hcFNsaWRlcyh0aGlzLmlkU3RvcnlNYXApLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcblxuXHRcdFx0XHR0aGlzLmlkRWRpdG9yID0gcmVzdWx0cy5pZF9lZGl0b3I7XG5cblx0XHRcdFx0dGhpcy5zZXJ2ZXIudXBkYXRlTWFwU2xpZGVzKHRoaXMuaWRFZGl0b3IsIHRoaXMuaWRTdG9yeU1hcCxcblx0XHRcdFx0XHRKU09OLnN0cmluZ2lmeSh0aGlzLnNsaWRlcykpLnRoZW4oXG5cblx0XHRcdFx0XHQoKSA9PiB7XG5cblx0XHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUoKTtcblxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0KCkgPT4ge1xuXG5cdFx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoKTtcblxuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0KTtcblxuXHRcdFx0fSxcblx0XHRcdCgpID0+IHtcblxuXHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoKTtcblxuXHRcdFx0fSk7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHR0aGlzLnNlcnZlci51cGRhdGVNYXBTbGlkZXModGhpcy5pZEVkaXRvciwgdGhpcy5pZFN0b3J5TWFwLFxuXHRcdFx0XHRKU09OLnN0cmluZ2lmeSh0aGlzLnNsaWRlcykpLnRoZW4oXG5cblx0XHRcdFx0KCkgPT4ge1xuXG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZSgpO1xuXG5cdFx0XHRcdH0sXG5cdFx0XHRcdCgpID0+IHtcblxuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdCgpO1xuXG5cdFx0XHRcdH0sXG5cblx0XHRcdCk7XG5cblx0XHR9XG5cblx0fSBlbHNlIHtcblxuXHRcdC8vIG5vIGV4aXN0ZWl4IGwnc3RvcnltYXAuIEVuIGNyZWVtIHVuIGRlIG5vdSBhbWIgbGEgaW5mbyBjb3JyZXNwb25lbnRcblx0XHR0aGlzLnNlcnZlci5uZXdNYXBTbGlkZXMoSlNPTi5zdHJpbmdpZnkodGhpcy5zbGlkZXMpKS50aGVuKChyZXN1bHRzKSA9PiB7XG5cblx0XHRcdHRoaXMuaWRTdG9yeU1hcCA9IHJlc3VsdHMuaWQ7XG5cdFx0XHR0aGlzLmlkRWRpdG9yID0gcmVzdWx0cy5pZF9lZGl0b3I7XG5cdFx0XHRkZWZlcnJlZC5yZXNvbHZlKCk7XG5cblx0XHR9LFxuXHRcdCgpID0+IHtcblxuXHRcdFx0ZGVmZXJyZWQucmVqZWN0KCk7XG5cblx0XHR9KTtcblxuXHR9XG5cblx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcblxufTtcblxuU3RvcnlNYXAucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoaWQpIHtcblxuXHRjb25zdCBzZWxmID0gdGhpcztcblxuXHRzZWxmLmlkRWRpdG9yID0gaWQ7XG5cblx0c2VsZi5zZXJ2ZXIuZWRpdE1hcFNsaWRlcyhpZCkudGhlbigocmVzdWx0cykgPT4ge1xuXG5cdFx0c2VsZi5pc0RpcnR5ID0gZmFsc2U7XG5cdFx0c2VsZi5pZFN0b3J5TWFwID0gcmVzdWx0cy5pZDtcblx0XHRzZWxmLnNsaWRlcyA9IEpTT04ucGFyc2UocmVzdWx0cy5zbGlkZXMpO1xuXHRcdHNlbGYuc2xpZGVCYXIuY2xlYXIoKTtcblx0XHRzZWxmLnNsaWRlQmFyLmFkZFNsaWRlcyhzZWxmLnNsaWRlcyk7XG5cblx0fSk7XG5cbn07XG5cblN0b3J5TWFwLnByb3RvdHlwZS5fc2xpZGVEZWxldGVDb25maXJtZWQgPSBmdW5jdGlvbiAoKSB7XG5cblx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cblx0c2VsZi5pc0RpcnR5ID0gdHJ1ZTtcblx0c2VsZi5zbGlkZXMuc3BsaWNlKHRoaXMuY3VycmVudERlbGV0aW9uSW5kZXgsIDEpO1xuXHRzZWxmLnNsaWRlQmFyLnJlbW92ZVNsaWRlKHRoaXMuY3VycmVudERlbGV0aW9uSW5kZXgpO1xuXG59O1xuXG5TdG9yeU1hcC5wcm90b3R5cGUucHVibGlzaCA9IGZ1bmN0aW9uICgpIHtcblxuXHRjb25zdCB1cmxFZGl0b3IgPSBgJHt0aGlzLm9wdGlvbnMuZWRpdG9yVVJMfT9pZD0ke3RoaXMuaWRFZGl0b3J9YDtcblx0Y29uc3QgdXJsVmlzb3IgPSBgJHt0aGlzLm9wdGlvbnMudmlld2VyVVJMfT9pZD0ke3RoaXMuaWRTdG9yeU1hcH1gO1xuXHRsZXQgbWVzc2FnZSA9IHRoaXMub3B0aW9ucy5zdHJpbmdzW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0ucHVibGlzaDtcblx0bWVzc2FnZSA9IG1lc3NhZ2UucmVwbGFjZSgvPDxlZGl0Pj4vZywgdXJsRWRpdG9yKTtcblx0bWVzc2FnZSA9IG1lc3NhZ2UucmVwbGFjZSgvPDx2aWV3Pj4vZywgdXJsVmlzb3IpO1xuXG5cdHRoaXMucHVibGlzaERpYWxvZy5zZXRNZXNzYWdlKG1lc3NhZ2UpO1xuXHR0aGlzLnB1Ymxpc2hEaWFsb2cuc2hvdygpO1xuXG59O1xuIiwiLyogZ2xvYmFsICQqL1xuXG5mdW5jdGlvbiBTdG9yeU1hcFNlcnZlcihvcHRpb25zKSB7XG5cblx0Y29uc3QgX2RlZmF1bHRPcHRpb25zID0ge1xuXG5cdFx0dXJsU3RvcnlNYXA6IFwiaHR0cDovLzE3Mi43MC4xLjMyL3N0b3J5bWFwcy9cIixcblxuXHR9O1xuXG5cdHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBfZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuXG59XG5cblN0b3J5TWFwU2VydmVyLnByb3RvdHlwZS5nZXRNYXBTbGlkZXMgPSBmdW5jdGlvbiAoaWRNYXBhKSB7XG5cblx0Ly8gRXhhbXBsZTogaHR0cDovLzE3Mi43MC4xLjMyL3N0b3J5bWFwcy83NjhkZGM2MC02NmUyLTExZTctYWY1ZS0wOWFmZjAwNzIzMGRcblx0cmV0dXJuICQuYWpheCh7XG5cblx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0dXJsOiB0aGlzLm9wdGlvbnMudXJsU3RvcnlNYXAgKyBpZE1hcGEsXG5cblx0fSk7XG5cbn07XG5cblN0b3J5TWFwU2VydmVyLnByb3RvdHlwZS5lZGl0TWFwU2xpZGVzID0gZnVuY3Rpb24gKGlkTWFwYUVkaXRpbmcpIHtcblxuXHQvLyBFeGFtcGxlOiBodHRwOi8vMTcyLjcwLjEuMzIvc3RvcnltYXBzL2VkaXQvNzZkMjFmMDAtNDhlMC00MjE2LWJiNTItODRhOGE0MWNjNmEyXG5cdHJldHVybiAkLmFqYXgoe1xuXG5cdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdHVybDogYCR7dGhpcy5vcHRpb25zLnVybFN0b3J5TWFwfWVkaXQvJHtpZE1hcGFFZGl0aW5nfWAsXG5cblx0fSk7XG5cbn07XG5TdG9yeU1hcFNlcnZlci5wcm90b3R5cGUubmV3TWFwU2xpZGVzID0gZnVuY3Rpb24gKGpzb25TbGlkZXMpIHtcblxuXHQvLyBodHRwOi8vMTcyLjcwLjEuMzIvc3RvcnltYXBzL2VkaXQvXG5cdHJldHVybiAkLmFqYXgoe1xuXG5cdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHR1cmw6IGAke3RoaXMub3B0aW9ucy51cmxTdG9yeU1hcH1lZGl0L2AsXG5cdFx0ZGF0YVR5cGU6IFwianNvblwiLFxuXHRcdGRhdGE6IHsgaWQ6IDAsIGlkX2VkaXRvcjogMCwgc2xpZGVzOiBqc29uU2xpZGVzIH0sXG5cblx0fSk7XG5cbn07XG5cblxuU3RvcnlNYXBTZXJ2ZXIucHJvdG90eXBlLnVwZGF0ZU1hcFNsaWRlcyA9IGZ1bmN0aW9uIChpZE1hcGFFZGl0aW5nLCBpZE1hcGEsIGpzb25TbGlkZXMpIHtcblxuXHRyZXR1cm4gJC5hamF4KHtcblxuXHRcdG1ldGhvZDogXCJQVVRcIixcblx0XHR1cmw6IGAke3RoaXMub3B0aW9ucy51cmxTdG9yeU1hcH1lZGl0LyR7aWRNYXBhRWRpdGluZ31gLFxuXHRcdGRhdGFUeXBlOiBcImpzb25cIixcblx0XHRkYXRhOiB7IGlkOiBpZE1hcGEsIGlkX2VkaXRvcjogaWRNYXBhRWRpdGluZywgc2xpZGVzOiBqc29uU2xpZGVzIH0sXG5cblx0fSk7XG5cbn07XG5cblN0b3J5TWFwU2VydmVyLnByb3RvdHlwZS5kZWxldGVNYXBTbGlkZXMgPSBmdW5jdGlvbiAoaWRNYXBhRWRpdGluZywgaWRNYXBhKSB7XG5cblx0JC5hamF4KHtcblxuXHRcdG1ldGhvZDogXCJERUxFVEVcIixcblx0XHR1cmw6IGAke3RoaXMub3B0aW9ucy51cmxTdG9yeU1hcH1lZGl0LyR7aWRNYXBhRWRpdGluZ30vJHtpZE1hcGF9YCxcblx0XHRjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG5cblx0fSlcblx0XHQuZG9uZSgoKSA9PiB7XG5cblx0XHR9KTtcblxufTtcbiIsIi8qIGV4cG9ydGVkIFV0aWxzICovXG5jb25zdCBVdGlscyA9IHtcblxuXHRpc1ZhbGlkVVJMKHVybCkge1xuXG5cdFx0Y29uc3QgZXhwcmVzc2lvbiA9IC9odHRwcz86XFwvXFwvKHd3d1xcLik/Wy1hLXpBLVowLTlAOiUuX1xcXFwrfiM9XXsyLDI1Nn1cXC5bYS16XXsyLDZ9XFxiKFstYS16QS1aMC05QDolX1xcXFwrLn4jPyYvLz1dKikvZ2k7XG5cdFx0Y29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGV4cHJlc3Npb24pO1xuXG5cdFx0cmV0dXJuIHJlZ2V4LnRlc3QodXJsKTtcblxuXHR9LFxuXG5cdGlzTm90RW1wdHkodGV4dCkge1xuXG5cdFx0cmV0dXJuICh0ZXh0LnRyaW0oKSAhPT0gXCJcIik7XG5cblx0fSxcblxuXHRnZXRSYW5kb21MZXR0ZXIoKSB7XG5cblx0XHRyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSg2NSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI2KSk7XG5cblx0fSxcblxuXHRnZXRSYW5kb21JZCgpIHtcblxuXHRcdHJldHVybiBVdGlscy5nZXRSYW5kb21MZXR0ZXIoKSArIERhdGUubm93KCk7XG5cblx0fSxcblxufTtcbiJdfQ==
